T14:28:51 db_is_up=
T14:28:51 main elasticsearch 7.x v1
T14:28:51 check_arg elasticsearch 7.x v1
T14:28:51 '[' '!' 3 -eq 3 ']'
T14:28:51 local distro=elasticsearch
T14:28:51 local es_version=7.x
T14:28:51 local j_version=7.x
T14:28:51 bring_up_storage elasticsearch 7.x
T14:28:51 local distro=elasticsearch
T14:28:51 local version=7.x
T14:28:51 local major_version=7
T14:28:51 local compose_file=docker-compose/elasticsearch/v7/docker-compose.yml
T14:28:51 echo 'starting elasticsearch 7'
starting elasticsearch 7
T14:28:51 for retry in 1 2 3
T14:28:51 echo 'attempt 1'
attempt 1
T14:28:51 '[' elasticsearch = elasticsearch ']'
T14:28:51 setup_db docker-compose/elasticsearch/v7/docker-compose.yml
T14:28:51 local compose_file=docker-compose/elasticsearch/v7/docker-compose.yml
T14:28:51 docker compose -f docker-compose/elasticsearch/v7/docker-compose.yml up -d
time="2024-07-07T14:28:51Z" level=warning msg="/home/runner/work/jaeger/jaeger/docker-compose/elasticsearch/v7/docker-compose.yml: `version` is obsolete"
 elasticsearch Pulling 
 bef9b66d64c1 Pulling fs layer 
 17ef683c4570 Pulling fs layer 
 3cd15eabbcc1 Pulling fs layer 
 4ca545ee6d5d Pulling fs layer 
 debf675e56e9 Pulling fs layer 
 044b651245ad Pulling fs layer 
 d87988066472 Pulling fs layer 
 93ba9bb36fb8 Pulling fs layer 
 b3ffa3ef4ca5 Pulling fs layer 
 0e03daef1aae Pulling fs layer 
 4ca545ee6d5d Waiting 
 debf675e56e9 Waiting 
 044b651245ad Waiting 
 d87988066472 Waiting 
 0e03daef1aae Waiting 
 93ba9bb36fb8 Waiting 
 b3ffa3ef4ca5 Waiting 
 3cd15eabbcc1 Downloading [================================>                  ]  3.585kB/5.537kB
 3cd15eabbcc1 Downloading [==================================================>]  5.537kB/5.537kB
 3cd15eabbcc1 Verifying Checksum 
 3cd15eabbcc1 Download complete 
 bef9b66d64c1 Downloading [>                                                  ]  310.8kB/29.92MB
 bef9b66d64c1 Downloading [==================================>                ]  20.86MB/29.92MB
 4ca545ee6d5d Downloading [==================================================>]      42B/42B
 4ca545ee6d5d Verifying Checksum 
 4ca545ee6d5d Download complete 
 bef9b66d64c1 Verifying Checksum 
 bef9b66d64c1 Download complete 
 bef9b66d64c1 Extracting [>                                                  ]  327.7kB/29.92MB
 bef9b66d64c1 Extracting [==========>                                        ]  6.554MB/29.92MB
 bef9b66d64c1 Extracting [==================>                                ]  10.81MB/29.92MB
 bef9b66d64c1 Extracting [============================>                      ]  17.04MB/29.92MB
 17ef683c4570 Downloading [>                                                  ]  84.04kB/7.816MB
 bef9b66d64c1 Extracting [=========================================>         ]   24.9MB/29.92MB
 17ef683c4570 Downloading [==>                                                ]  328.8kB/7.816MB
 044b651245ad Downloading [==================>                                ]  3.596kB/9.737kB
 044b651245ad Downloading [==================================================>]  9.737kB/9.737kB
 044b651245ad Verifying Checksum 
 044b651245ad Download complete 
 bef9b66d64c1 Extracting [==========================================>        ]  25.56MB/29.92MB
 17ef683c4570 Downloading [=========>                                         ]  1.424MB/7.816MB
 17ef683c4570 Downloading [===============================>                   ]  4.886MB/7.816MB
 bef9b66d64c1 Extracting [================================================>  ]  28.84MB/29.92MB
 17ef683c4570 Verifying Checksum 
 17ef683c4570 Download complete 
 bef9b66d64c1 Extracting [=================================================> ]  29.82MB/29.92MB
 bef9b66d64c1 Extracting [==================================================>]  29.92MB/29.92MB
 debf675e56e9 Downloading [>                                                  ]  527.1kB/338.9MB
 93ba9bb36fb8 Downloading [>                                                  ]  3.583kB/200.3kB
 bef9b66d64c1 Pull complete 
 17ef683c4570 Extracting [>                                                  ]   98.3kB/7.816MB
 93ba9bb36fb8 Downloading [==================================================>]  200.3kB/200.3kB
 93ba9bb36fb8 Verifying Checksum 
 93ba9bb36fb8 Download complete 
 debf675e56e9 Downloading [>                                                  ]  1.594MB/338.9MB
 d87988066472 Downloading [==================================================>]  2.046kB/2.046kB
 d87988066472 Verifying Checksum 
 d87988066472 Download complete 
 17ef683c4570 Extracting [===========================>                       ]  4.325MB/7.816MB
 debf675e56e9 Downloading [>                                                  ]   4.27MB/338.9MB
 17ef683c4570 Extracting [===============================================>   ]  7.471MB/7.816MB
 b3ffa3ef4ca5 Downloading [==================================================>]     415B/415B
 b3ffa3ef4ca5 Verifying Checksum 
 b3ffa3ef4ca5 Download complete 
 17ef683c4570 Extracting [==================================================>]  7.816MB/7.816MB
 debf675e56e9 Downloading [=>                                                 ]  8.549MB/338.9MB
 17ef683c4570 Pull complete 
 0e03daef1aae Downloading [=>                                                 ]  3.583kB/110.7kB
 3cd15eabbcc1 Extracting [==================================================>]  5.537kB/5.537kB
 3cd15eabbcc1 Extracting [==================================================>]  5.537kB/5.537kB
 0e03daef1aae Downloading [==================================================>]  110.7kB/110.7kB
 0e03daef1aae Verifying Checksum 
 0e03daef1aae Download complete 
 3cd15eabbcc1 Pull complete 
 4ca545ee6d5d Extracting [==================================================>]      42B/42B
 4ca545ee6d5d Extracting [==================================================>]      42B/42B
 4ca545ee6d5d Pull complete 
 debf675e56e9 Downloading [=>                                                 ]  13.36MB/338.9MB
 debf675e56e9 Downloading [==>                                                ]  19.77MB/338.9MB
 debf675e56e9 Downloading [====>                                              ]  27.24MB/338.9MB
 debf675e56e9 Downloading [=====>                                             ]  35.24MB/338.9MB
 debf675e56e9 Downloading [=====>                                             ]  40.56MB/338.9MB
 debf675e56e9 Downloading [=======>                                           ]  48.02MB/338.9MB
 debf675e56e9 Downloading [========>                                          ]   54.4MB/338.9MB
 debf675e56e9 Downloading [=========>                                         ]  61.32MB/338.9MB
 debf675e56e9 Downloading [==========>                                        ]  69.31MB/338.9MB
 debf675e56e9 Downloading [===========>                                       ]  77.32MB/338.9MB
 debf675e56e9 Downloading [============>                                      ]  85.31MB/338.9MB
 debf675e56e9 Downloading [=============>                                     ]  93.86MB/338.9MB
 debf675e56e9 Downloading [===============>                                   ]  101.9MB/338.9MB
 debf675e56e9 Downloading [================>                                  ]  109.4MB/338.9MB
 debf675e56e9 Downloading [=================>                                 ]  117.4MB/338.9MB
 debf675e56e9 Downloading [==================>                                ]  125.4MB/338.9MB
 debf675e56e9 Downloading [===================>                               ]  133.4MB/338.9MB
 debf675e56e9 Downloading [====================>                              ]  140.9MB/338.9MB
 debf675e56e9 Downloading [=====================>                             ]  147.8MB/338.9MB
 debf675e56e9 Downloading [======================>                            ]  155.8MB/338.9MB
 debf675e56e9 Downloading [========================>                          ]  163.8MB/338.9MB
 debf675e56e9 Downloading [=========================>                         ]  172.3MB/338.9MB
 debf675e56e9 Downloading [==========================>                        ]  180.3MB/338.9MB
 debf675e56e9 Downloading [===========================>                       ]  188.4MB/338.9MB
 debf675e56e9 Downloading [============================>                      ]  196.4MB/338.9MB
 debf675e56e9 Downloading [==============================>                    ]  204.8MB/338.9MB
 debf675e56e9 Downloading [===============================>                   ]  212.8MB/338.9MB
 debf675e56e9 Downloading [================================>                  ]  220.8MB/338.9MB
 debf675e56e9 Downloading [=================================>                 ]  229.4MB/338.9MB
 debf675e56e9 Downloading [===================================>               ]  237.3MB/338.9MB
 debf675e56e9 Downloading [====================================>              ]  245.4MB/338.9MB
 debf675e56e9 Downloading [=====================================>             ]  251.7MB/338.9MB
 debf675e56e9 Downloading [=====================================>             ]  257.1MB/338.9MB
 debf675e56e9 Downloading [======================================>            ]  262.9MB/338.9MB
 debf675e56e9 Downloading [=======================================>           ]  269.3MB/338.9MB
 debf675e56e9 Downloading [========================================>          ]  275.2MB/338.9MB
 debf675e56e9 Downloading [=========================================>         ]    281MB/338.9MB
 debf675e56e9 Downloading [==========================================>        ]  284.8MB/338.9MB
 debf675e56e9 Downloading [==========================================>        ]  290.6MB/338.9MB
 debf675e56e9 Downloading [===========================================>       ]    297MB/338.9MB
 debf675e56e9 Downloading [============================================>      ]  302.9MB/338.9MB
 debf675e56e9 Downloading [=============================================>     ]  309.3MB/338.9MB
 debf675e56e9 Downloading [==============================================>    ]  315.7MB/338.9MB
 debf675e56e9 Downloading [===============================================>   ]  322.1MB/338.9MB
 debf675e56e9 Downloading [================================================>  ]  328.5MB/338.9MB
 debf675e56e9 Downloading [=================================================> ]  334.9MB/338.9MB
 debf675e56e9 Verifying Checksum 
 debf675e56e9 Download complete 
 debf675e56e9 Extracting [>                                                  ]  557.1kB/338.9MB
 debf675e56e9 Extracting [==>                                                ]  18.94MB/338.9MB
 debf675e56e9 Extracting [=====>                                             ]  40.67MB/338.9MB
 debf675e56e9 Extracting [========>                                          ]  60.72MB/338.9MB
 debf675e56e9 Extracting [============>                                      ]  82.44MB/338.9MB
 debf675e56e9 Extracting [=============>                                     ]  92.47MB/338.9MB
 debf675e56e9 Extracting [==============>                                    ]  101.4MB/338.9MB
 debf675e56e9 Extracting [================>                                  ]  110.9MB/338.9MB
 debf675e56e9 Extracting [=================>                                 ]  120.3MB/338.9MB
 debf675e56e9 Extracting [===================>                               ]  129.2MB/338.9MB
 debf675e56e9 Extracting [====================>                              ]  137.6MB/338.9MB
 debf675e56e9 Extracting [=====================>                             ]  144.8MB/338.9MB
 debf675e56e9 Extracting [======================>                            ]  153.2MB/338.9MB
 debf675e56e9 Extracting [=======================>                           ]  161.5MB/338.9MB
 debf675e56e9 Extracting [==========================>                        ]  182.2MB/338.9MB
 debf675e56e9 Extracting [=============================>                     ]  203.3MB/338.9MB
 debf675e56e9 Extracting [===============================>                   ]  216.1MB/338.9MB
 debf675e56e9 Extracting [=================================>                 ]    229MB/338.9MB
 debf675e56e9 Extracting [===================================>               ]  238.4MB/338.9MB
 debf675e56e9 Extracting [=====================================>             ]  251.2MB/338.9MB
 debf675e56e9 Extracting [=======================================>           ]  267.4MB/338.9MB
 debf675e56e9 Extracting [==========================================>        ]  286.3MB/338.9MB
 debf675e56e9 Extracting [============================================>      ]  298.6MB/338.9MB
 debf675e56e9 Extracting [=============================================>     ]  309.2MB/338.9MB
 debf675e56e9 Extracting [================================================>  ]  328.1MB/338.9MB
 debf675e56e9 Extracting [==================================================>]  338.9MB/338.9MB
 debf675e56e9 Pull complete 
 044b651245ad Extracting [==================================================>]  9.737kB/9.737kB
 044b651245ad Extracting [==================================================>]  9.737kB/9.737kB
 044b651245ad Pull complete 
 d87988066472 Extracting [==================================================>]  2.046kB/2.046kB
 d87988066472 Extracting [==================================================>]  2.046kB/2.046kB
 d87988066472 Pull complete 
 93ba9bb36fb8 Extracting [========>                                          ]  32.77kB/200.3kB
 93ba9bb36fb8 Extracting [==================================================>]  200.3kB/200.3kB
 93ba9bb36fb8 Extracting [==================================================>]  200.3kB/200.3kB
 93ba9bb36fb8 Pull complete 
 b3ffa3ef4ca5 Extracting [==================================================>]     415B/415B
 b3ffa3ef4ca5 Extracting [==================================================>]     415B/415B
 b3ffa3ef4ca5 Pull complete 
 0e03daef1aae Extracting [==============>                                    ]  32.77kB/110.7kB
 0e03daef1aae Extracting [==================================================>]  110.7kB/110.7kB
 0e03daef1aae Extracting [==================================================>]  110.7kB/110.7kB
 0e03daef1aae Pull complete 
 elasticsearch Pulled 
 Network v7_default  Creating
 Network v7_default  Created
 Container v7-elasticsearch-1  Creating
 Container v7-elasticsearch-1  Created
 Container v7-elasticsearch-1  Starting
 Container v7-elasticsearch-1  Started
T14:29:04 echo docker_compose_file=docker-compose/elasticsearch/v7/docker-compose.yml
T14:29:04 wait_for_storage elasticsearch http://localhost:9200 docker-compose/elasticsearch/v7/docker-compose.yml
T14:29:04 local distro=elasticsearch
T14:29:04 local url=http://localhost:9200
T14:29:04 local compose_file=docker-compose/elasticsearch/v7/docker-compose.yml
T14:29:04 params=('--silent' '--output' '/dev/null' '--write-out' '%{http_code}')
T14:29:04 local params
T14:29:04 local max_attempts=60
T14:29:04 local attempt=0
T14:29:04 echo 'Waiting for elasticsearch to be available at http://localhost:9200...'
Waiting for elasticsearch to be available at http://localhost:9200...
TT14:29:04 curl --silent --output /dev/null --write-out '%{http_code}' http://localhost:9200
T14:29:04 [[ 000 == \2\0\0 ]]
T14:29:04 ((  attempt >= max_attempts  ))
T14:29:04 attempt=1
T14:29:04 echo 'Attempt: 1 elasticsearch is not yet available at http://localhost:9200...'
Attempt: 1 elasticsearch is not yet available at http://localhost:9200...
T14:29:04 sleep 10
TT14:29:14 curl --silent --output /dev/null --write-out '%{http_code}' http://localhost:9200
T14:29:14 [[ 000 == \2\0\0 ]]
T14:29:14 ((  attempt >= max_attempts  ))
T14:29:14 attempt=2
T14:29:14 echo 'Attempt: 2 elasticsearch is not yet available at http://localhost:9200...'
Attempt: 2 elasticsearch is not yet available at http://localhost:9200...
T14:29:14 sleep 10
TT14:29:24 curl --silent --output /dev/null --write-out '%{http_code}' http://localhost:9200
T14:29:24 [[ 200 == \2\0\0 ]]
TT14:29:24 curl --silent --output /dev/null --write-out '%{http_code}' http://localhost:9200
T14:29:24 [[ 200 != \2\0\0 ]]
T14:29:24 echo 'SUCCESS: elasticsearch is available at http://localhost:9200'
SUCCESS: elasticsearch is available at http://localhost:9200
T14:29:24 db_is_up=1
T14:29:24 '[' 1 = 1 ']'
T14:29:24 break
T14:29:24 '[' 1 = 1 ']'
T14:29:24 trap 'teardown_storage docker-compose/elasticsearch/v7/docker-compose.yml' EXIT
T14:29:24 build_local_img
T14:29:24 local LOCAL_FLAG=
T14:29:24 local platforms=linux/amd64
TT14:29:24 tr , ' '
TT14:29:24 echo linux/amd64
T14:29:24 for platform in $(echo "$platforms" | tr ',' ' ')
T14:29:24 arch=amd64
T14:29:24 make build-binaries-amd64
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
GOOS=linux GOARCH=amd64 make _build-platform-binaries
make[1]: Entering directory '/home/runner/work/jaeger/jaeger'
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath   -o ./cmd/agent/agent-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/agent
make rebuild-ui
make[2]: Entering directory '/home/runner/work/jaeger/jaeger'
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
bash ./scripts/rebuild-ui.sh
+ cd jaeger-ui
+ git fetch --all --tags
+ git log --oneline --decorate=full -n 10
+ cat
560c749b (grafted, HEAD, tag: refs/tags/v1.58.0) Prepare release v1.58.0 (#2331)
++ git describe --tags --dirty
+ last_tag=v1.58.0
+ [[ v1.58.0 =~ ^v[0-9]+\.[0-9]+\.[0-9]+$ ]]
++ git rev-parse HEAD
+ branch_hash=560c749b481f8244bf76b0afe001174fa9ce11f5
++ git rev-parse v1.58.0
+ last_tag_hash=560c749b481f8244bf76b0afe001174fa9ce11f5
+ [[ 560c749b481f8244bf76b0afe001174fa9ce11f5 == \5\6\0\c\7\4\9\b\4\8\1\f\8\2\4\4\b\f\7\6\b\0\a\f\e\0\0\1\1\7\4\f\a\9\c\e\1\1\f\5 ]]
++ mktemp
+ temp_file=/tmp/tmp.N532lr0Qz0
+ trap 'rm -f /tmp/tmp.N532lr0Qz0' EXIT
+ release_url=https://github.com/jaegertracing/jaeger-ui/releases/download/v1.58.0/assets.tar.gz
+ curl --silent --fail --location --output /tmp/tmp.N532lr0Qz0 https://github.com/jaegertracing/jaeger-ui/releases/download/v1.58.0/assets.tar.gz
+ mkdir -p packages/jaeger-ui/build/
+ rm -r -f packages/jaeger-ui/build/
+ tar -zxvf /tmp/tmp.N532lr0Qz0 packages/jaeger-ui/build/
packages/jaeger-ui/build/
packages/jaeger-ui/build/static/
packages/jaeger-ui/build/static/monitor-BYreg9RK.png
packages/jaeger-ui/build/static/jaeger-logo-CNZsoUdk.svg
packages/jaeger-ui/build/static/index-bzTJ6oK_.css
packages/jaeger-ui/build/static/index-legacy-CpL7BSIU.js
packages/jaeger-ui/build/static/index-CDLMgXBK.js
packages/jaeger-ui/build/static/polyfills-legacy-D919C7DZ.js
packages/jaeger-ui/build/static/favicon-BxcVf0am.ico
packages/jaeger-ui/build/index.html
+ exit 0
+ rm -f /tmp/tmp.N532lr0Qz0
NOTE: This target only rebuilds the UI assets inside jaeger-ui/packages/jaeger-ui/build/.
NOTE: To make them usable from query-service run 'make build-ui'.
make[2]: Leaving directory '/home/runner/work/jaeger/jaeger'
# do not delete dot-files
rm -rf cmd/query/app/ui/actual/*
cp -r jaeger-ui/packages/jaeger-ui/build/* cmd/query/app/ui/actual/
find cmd/query/app/ui/actual -type f | grep -v .gitignore | xargs gzip --no-name
# copy the timestamp for index.html.gz from the original file
touch -t $(date -r jaeger-ui/packages/jaeger-ui/build/index.html '+%Y%m%d%H%M.%S') cmd/query/app/ui/actual/index.html.gz
ls -lF cmd/query/app/ui/actual/
total 8
-rw-r--r-- 1 runner docker 1835 Jun 11 15:26 index.html.gz
drwxr-xr-x 2 runner docker 4096 Jul  7 14:29 static/
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath  -tags ui -o ./cmd/all-in-one/all-in-one-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/all-in-one
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath   -o ./cmd/collector/collector-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/collector
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath  -tags ui -o ./cmd/query/query-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/query
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath   -o ./cmd/ingester/ingester-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/ingester
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath  -tags ui -o ./cmd/jaeger/jaeger-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/jaeger
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath   -o ./cmd/remote-storage/remote-storage-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/remote-storage
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -o ./examples/hotrod/hotrod-linux-amd64 ./examples/hotrod/main.go
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" -o ./cmd/tracegen/tracegen-linux-amd64 ./cmd/tracegen/
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" -o ./cmd/anonymizer/anonymizer-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/anonymizer/
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -o ./plugin/storage/es/esmapping-generator-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/esmapping-generator/
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -o ./cmd/es-index-cleaner/es-index-cleaner-linux-amd64 ./cmd/es-index-cleaner/
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -o ./cmd/es-rollover/es-rollover-linux-amd64 ./cmd/es-rollover/
make _build-platform-binaries-debug GOOS=linux GOARCH=amd64 DEBUG_BINARY=1
make[2]: Entering directory '/home/runner/work/jaeger/jaeger'
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -gcflags="all=-N -l"  -o ./cmd/agent/agent-debug-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/agent
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -gcflags="all=-N -l"  -o ./cmd/collector/collector-debug-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/collector
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -gcflags="all=-N -l" -tags ui -o ./cmd/query/query-debug-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/query
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -gcflags="all=-N -l"  -o ./cmd/ingester/ingester-debug-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/ingester
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -gcflags="all=-N -l"  -o ./cmd/remote-storage/remote-storage-debug-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/remote-storage
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -gcflags="all=-N -l" -tags ui -o ./cmd/all-in-one/all-in-one-debug-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/all-in-one
make[2]: Leaving directory '/home/runner/work/jaeger/jaeger'
make[1]: Leaving directory '/home/runner/work/jaeger/jaeger'
T14:31:58 export GITHUB_SHA=local-test
T14:31:58 GITHUB_SHA=local-test
T14:31:58 make create-baseimg
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
docker buildx inspect jaeger-build > /dev/null || docker buildx create --use --name=jaeger-build --buildkitd-flags="--allow-insecure-entitlement security.insecure --allow-insecure-entitlement network.host" --driver-opt="network=host"
ERROR: no builder "jaeger-build" found
jaeger-build
docker inspect registry > /dev/null || docker run --rm -d -p 5000:5000 --name registry registry:2
Error: No such object: registry
Unable to find image 'registry:2' locally
2: Pulling from library/registry
73baa7ef167e: Already exists
d49090716641: Pulling fs layer
bc8f2b8a18ff: Pulling fs layer
9d41963883ad: Pulling fs layer
ad02dd2076d6: Pulling fs layer
ad02dd2076d6: Waiting
9d41963883ad: Verifying Checksum
9d41963883ad: Download complete
d49090716641: Verifying Checksum
d49090716641: Download complete
bc8f2b8a18ff: Verifying Checksum
bc8f2b8a18ff: Download complete
d49090716641: Pull complete
ad02dd2076d6: Verifying Checksum
ad02dd2076d6: Download complete
bc8f2b8a18ff: Pull complete
9d41963883ad: Pull complete
ad02dd2076d6: Pull complete
Digest: sha256:79b29591e1601a73f03fcd413e655b72b9abfae5a23f1ad2e883d4942fbb4351
Status: Downloaded newer image for registry:2
8247d6570b4c504f208998d99b0694b28a2dcac37eff994afeb20a45e2c1a6eb
docker buildx build -t localhost:5000/baseimg_alpine:latest --push \
	--platform=linux/amd64,linux/s390x,linux/ppc64le,linux/arm64 \
	docker/base
#0 building with "jaeger-build" instance using docker-container driver

#1 [internal] booting buildkit
#1 pulling image moby/buildkit:buildx-stable-1
#1 pulling image moby/buildkit:buildx-stable-1 0.6s done
#1 creating container buildx_buildkit_jaeger-build0
#1 creating container buildx_buildkit_jaeger-build0 0.4s done
#1 DONE 1.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 278B done
#2 DONE 0.0s

#3 [linux/arm64 internal] load metadata for docker.io/library/alpine:3.20.1
#3 ...

#4 [auth] library/alpine:pull token for registry-1.docker.io
#4 DONE 0.0s

#5 [linux/amd64 internal] load metadata for docker.io/library/alpine:3.20.1
#5 ...

#6 [linux/s390x internal] load metadata for docker.io/library/alpine:3.20.1
#6 DONE 2.5s

#3 [linux/arm64 internal] load metadata for docker.io/library/alpine:3.20.1
#3 DONE 2.5s

#5 [linux/amd64 internal] load metadata for docker.io/library/alpine:3.20.1
#5 DONE 2.5s

#7 [internal] load .dockerignore
#7 transferring context: 2B done
#7 DONE 0.0s

#8 [linux/ppc64le internal] load metadata for docker.io/library/alpine:3.20.1
#8 DONE 2.5s

#9 [linux/arm64 cert 1/2] FROM docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0
#9 resolve docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0 0.0s done
#9 DONE 0.0s

#10 [linux/ppc64le cert 1/2] FROM docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0
#10 resolve docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0 0.0s done
#10 sha256:b02dcd5eb44e382ea711bca074a007403db63dacf55f888b3a87214d1052dd50 3.57MB / 3.57MB 0.2s done
#10 ...

#11 [linux/amd64 cert 1/2] FROM docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0
#11 resolve docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0 0.0s done
#11 sha256:ec99f8b99825a742d50fb3ce173d291378a46ab54b8ef7dd75e5654e2a296e99 3.62MB / 3.62MB 0.2s done
#11 extracting sha256:ec99f8b99825a742d50fb3ce173d291378a46ab54b8ef7dd75e5654e2a296e99 0.1s done
#11 DONE 0.4s

#12 [linux/s390x cert 1/2] FROM docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0
#12 resolve docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0 0.0s done
#12 sha256:f9a77bce0ddc1b9251f410e8c69566b002f4e557ee68895b558671311b17fd91 3.46MB / 3.46MB 0.2s done
#12 extracting sha256:f9a77bce0ddc1b9251f410e8c69566b002f4e557ee68895b558671311b17fd91 0.2s done
#12 DONE 0.4s

#10 [linux/ppc64le cert 1/2] FROM docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0
#10 extracting sha256:b02dcd5eb44e382ea711bca074a007403db63dacf55f888b3a87214d1052dd50
#10 extracting sha256:b02dcd5eb44e382ea711bca074a007403db63dacf55f888b3a87214d1052dd50 0.2s done
#10 DONE 0.5s

#9 [linux/arm64 cert 1/2] FROM docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0
#9 sha256:a258b2a6b59a7aa244d8ceab095c7f8df726f27075a69fca7ad8490f3f63148a 4.09MB / 4.09MB 0.2s done
#9 extracting sha256:a258b2a6b59a7aa244d8ceab095c7f8df726f27075a69fca7ad8490f3f63148a 0.2s done
#9 DONE 0.4s

#13 [linux/s390x cert 2/2] RUN apk add --update --no-cache ca-certificates mailcap
#13 0.157 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/main/s390x/APKINDEX.tar.gz
#13 ...

#14 [linux/amd64 cert 2/2] RUN apk add --update --no-cache ca-certificates mailcap
#14 0.126 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/main/x86_64/APKINDEX.tar.gz
#14 0.294 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/community/x86_64/APKINDEX.tar.gz
#14 0.778 (1/2) Installing ca-certificates (20240226-r0)
#14 0.818 (2/2) Installing mailcap (2.1.54-r0)
#14 0.829 Executing busybox-1.36.1-r29.trigger
#14 0.839 Executing ca-certificates-20240226-r0.trigger
#14 0.906 OK: 9 MiB in 16 packages
#14 DONE 1.1s

#15 [linux/amd64 stage-1 2/3] COPY --from=cert /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt
#15 DONE 0.0s

#16 [linux/amd64 stage-1 3/3] COPY --from=cert /etc/mime.types /etc/mime.types
#16 DONE 0.0s

#17 [linux/arm64 cert 2/2] RUN apk add --update --no-cache ca-certificates mailcap
#17 0.183 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/main/aarch64/APKINDEX.tar.gz
#17 1.104 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/community/aarch64/APKINDEX.tar.gz
#17 2.228 (1/2) Installing ca-certificates (20240226-r0)
#17 2.290 (2/2) Installing mailcap (2.1.54-r0)
#17 2.303 Executing busybox-1.36.1-r29.trigger
#17 2.345 Executing ca-certificates-20240226-r0.trigger
#17 2.622 OK: 10 MiB in 16 packages
#17 DONE 2.8s

#18 [linux/arm64 stage-1 2/3] COPY --from=cert /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt
#18 DONE 0.0s

#19 [linux/ppc64le cert 2/2] RUN apk add --update --no-cache ca-certificates mailcap
#19 0.192 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/main/ppc64le/APKINDEX.tar.gz
#19 1.144 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/community/ppc64le/APKINDEX.tar.gz
#19 2.593 (1/2) Installing ca-certificates (20240226-r0)
#19 2.688 (2/2) Installing mailcap (2.1.54-r0)
#19 2.705 Executing busybox-1.36.1-r29.trigger
#19 2.774 Executing ca-certificates-20240226-r0.trigger
#19 ...

#20 [linux/arm64 stage-1 3/3] COPY --from=cert /etc/mime.types /etc/mime.types
#20 DONE 0.0s

#19 [linux/ppc64le cert 2/2] RUN apk add --update --no-cache ca-certificates mailcap
#19 3.083 OK: 9 MiB in 16 packages
#19 DONE 3.2s

#13 [linux/s390x cert 2/2] RUN apk add --update --no-cache ca-certificates mailcap
#13 1.120 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/community/s390x/APKINDEX.tar.gz
#13 2.912 (1/2) Installing ca-certificates (20240226-r0)
#13 3.001 (2/2) Installing mailcap (2.1.54-r0)
#13 3.020 Executing busybox-1.36.1-r29.trigger
#13 3.061 Executing ca-certificates-20240226-r0.trigger
#13 3.346 OK: 9 MiB in 16 packages
#13 DONE 3.5s

#21 [linux/ppc64le stage-1 2/3] COPY --from=cert /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt
#21 DONE 0.0s

#22 [linux/ppc64le stage-1 3/3] COPY --from=cert /etc/mime.types /etc/mime.types
#22 DONE 0.0s

#23 [linux/s390x stage-1 2/3] COPY --from=cert /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt
#23 DONE 0.0s

#24 [linux/s390x stage-1 3/3] COPY --from=cert /etc/mime.types /etc/mime.types
#24 DONE 0.0s

#25 exporting to image
#25 exporting layers 0.1s done
#25 exporting manifest sha256:98d545d055840211c5a3fe7358a68d0e8899fc2abc5d055af3665480e2e4b5df done
#25 exporting config sha256:77845db9fca6dc97bd92226b0d7c55418afa69ad655ceeab1115b55290392d20 done
#25 exporting attestation manifest sha256:cf9c132af36b128e01ca211b9931d5db461f67a370c75913c561ed501dd7d8fa done
#25 exporting manifest sha256:7ec928ab8ffc8f5dc35bd3cbaedb4078dd30356ae0548bbcf64ea3e241005971 done
#25 exporting config sha256:ccd1f9532902cafcc9f4f7d4c15d7648b8fc5fd32be466f42c6227bc85d3a1d9 done
#25 exporting attestation manifest sha256:686490e32e4bda74e1f497ea45bc902accdb6cef849861bc80c9f50a4cf6badd done
#25 exporting manifest sha256:cd708138b78d31157357c0f619a619beb108c795f5e16362bc8e8c7fff2d8e7a done
#25 exporting config sha256:28ec53cd0961bb479ae08951248fa61ff5b1b2580c3b0e3857ec502d3687e212 done
#25 exporting attestation manifest sha256:b852eb6adb907369d51456da30b182418af8653f8e7af74273431667762dc6ab done
#25 exporting manifest sha256:5e2456593d43ba2827c2ae9439b2af4ff2a39e5bca3a3913025a349a1a6a36a9 done
#25 exporting config sha256:7f02419599d6684b820a6d10fdf9e50d5941ed41a61c84bd5af6ee3d3981bb12 done
#25 exporting attestation manifest sha256:71dd0828ba186eb99c0d4c7ce733fc51d527afdd22767e3048e55e73906365f5 done
#25 exporting manifest list sha256:5de9cf8aabcf7f3eafce3b10439b79a3541f9da5098572d4aab100ef47881365 done
#25 pushing layers 0.1s done
#25 pushing manifest for localhost:5000/baseimg_alpine:latest@sha256:5de9cf8aabcf7f3eafce3b10439b79a3541f9da5098572d4aab100ef47881365
#25 pushing manifest for localhost:5000/baseimg_alpine:latest@sha256:5de9cf8aabcf7f3eafce3b10439b79a3541f9da5098572d4aab100ef47881365 0.0s done
#25 DONE 0.4s
T14:32:09 bash scripts/build-upload-a-docker-image.sh -b -c jaeger-es-index-cleaner -d cmd/es-index-cleaner -p linux/amd64 -t release -l Y
+ '[' -n release ']'
+ target_arg='--target release'
+ docker_file_arg=cmd/es-index-cleaner/Dockerfile
+ IFS=' '
+ read -r -a IMAGE_TAGS
++ bash scripts/compute-tags.sh jaegertracing/jaeger-es-index-cleaner
+ BASE_BUILD_IMAGE=jaegertracing/jaeger-es-index-cleaner
scripts/compute-tags.sh: line 8: BRANCH: expecting BRANCH env var
+ upload_flag=
+ [[ Y = \Y ]]
+ IMAGE_TAGS=("--tag" "localhost:5000/${namespace}/${component_name}:${GITHUB_SHA}")
+ PUSHTAG='type=image, push=true'
+ docker buildx build --output 'type=image, push=true' --target release --build-arg base_image=localhost:5000/baseimg_alpine:latest --build-arg debug_image=localhost:5000/debugimg_alpine:latest --progress=plain --platform=linux/amd64 --file cmd/es-index-cleaner/Dockerfile --tag localhost:5000/jaegertracing/jaeger-es-index-cleaner:local-test cmd/es-index-cleaner
#0 building with "jaeger-build" instance using docker-container driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 251B done
#1 DONE 0.0s

#2 [internal] load metadata for localhost:5000/baseimg_alpine:latest
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/2] FROM localhost:5000/baseimg_alpine:latest@sha256:5de9cf8aabcf7f3eafce3b10439b79a3541f9da5098572d4aab100ef47881365
#4 resolve localhost:5000/baseimg_alpine:latest@sha256:5de9cf8aabcf7f3eafce3b10439b79a3541f9da5098572d4aab100ef47881365 done
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 13.19MB 0.1s done
#5 DONE 0.1s

#6 [2/2] COPY es-index-cleaner-linux-amd64 /go/bin/es-index-cleaner-linux
#6 DONE 0.1s

#7 exporting to image
#7 exporting layers
#7 exporting layers 0.5s done
#7 exporting manifest sha256:93a3d7f407697edfa847155fc09549b21600b83429d0e215be01ecbaf86303bb done
#7 exporting config sha256:166b53a96cb7787edbc8dd4ba8b7ff9c54ab43ef207f3a1485f84d1999862c95 done
#7 exporting attestation manifest sha256:566d62500a24d5e8f9cf3b05179b32f325d5eba38ff4dbf589848d05cdacd13e done
#7 exporting manifest list sha256:07a38e3296131aefb22017abdbda52ba1b27e5cf98b6b04438fc11c88a6d3776 done
#7 pushing layers 0.1s done
#7 pushing manifest for localhost:5000/jaegertracing/jaeger-es-index-cleaner:local-test@sha256:07a38e3296131aefb22017abdbda52ba1b27e5cf98b6b04438fc11c88a6d3776 0.0s done
#7 DONE 0.6s
+ echo 'Finished building jaeger-es-index-cleaner =============='
Finished building jaeger-es-index-cleaner ==============
+ df -h /
Filesystem      Size  Used Avail Use% Mounted on
/dev/root        73G   58G   16G  79% /
+ docker buildx prune --all --force
ID						RECLAIMABLE	SIZE		LAST ACCESSED
ih2qg35a3ormml8v9ghyzb927*              	true 		1.696MB   	1 second ago
172tgcixeromjd2werzjhkdv6*              	true 	4.096kB   	Less than a second ago
ol816mai5s4bcl6n2uxie16j5*              	true 	1.696MB   	1 second ago
lm9kzkig41c3al2bwwvp46kqn*              	true 	13.19MB   	Less than a second ago
l9mbwkgo1zzplg370qboomcsd*              	true 	8.192kB   	Less than a second ago
vqoh8iro12qb0u90t3k0ngs8z               	true 	106.2kB   	1 second ago
9m7ky892m28eerrsokmbajoy0               	true 	106.2kB   	1 second ago
36e7liny8e7njfwaeh75fhk67*              	true 	1.589MB   	1 second ago
ospdcxkbrr3mzmdtqmu66o3v5               	true 	106.2kB   	1 second ago
v297rppehqpnrftne4mc7j6ti*              	true 	1.589MB   	1 second ago
dnf2zj63nk9ipffj7mk7dd6vr               	true 	373.3kB   	1 second ago
7nd1ulhpymnipfqeem493gnxl               	true 	373.3kB   	1 second ago
c9uh66xw851t4e730odyecx0o               	true 	373.3kB   	1 second ago
5po7scuv63un7ufehl2g4ic45               	true 	20.49MB   	Less than a second ago
8f81ybejs62h6idyuk9f7vze2               	true 	12.79MB   	1 second ago
nk089vz2s1pridbprc8kkfrau               	true 	11.92MB   	1 second ago
vxdwmzqno86gffrme1tm9i1q8               	true 	106.2kB   	Less than a second ago
ggukrjhmxi17s437xz7ijvddy               	true 	13.58MB   	1 second ago
pm2jmf6l8tpfwbyfu21jgz1js               	true 	373.3kB   	Less than a second ago
nxbvdwreuk087gbopcp83k47a               	true 	12.08MB   	Less than a second ago
Total:	92.55MB
+ docker system prune --force
Total reclaimed space: 0B
+ df -h /
Filesystem      Size  Used Avail Use% Mounted on
/dev/root        73G   58G   16G  79% /
T14:32:10 [[ 7.x == \v\2 ]]
T14:32:10 STORAGE=elasticsearch
T14:32:10 make storage-integration-test
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
# Expire tests results for storage integration tests since the environment might change
# even though the code remains the same.
go clean -testcache
bash -c "set -e; set -o pipefail; go test -race -v -coverpkg=./... -coverprofile cover.out ./plugin/storage/integration/... | sed 's/PASS/✅ PASS/g' | sed 's/FAIL/❌ FAIL/g' | sed 's/SKIP/🔕 SKIP/g'"
=== RUN   TestBadgerStorage
    integration.go:109: This test requires environment variable STORAGE=badger
--- 🔕 SKIP: TestBadgerStorage (0.00s)
=== RUN   TestCassandraStorage
    integration.go:109: This test requires environment variable STORAGE=cassandra
--- 🔕 SKIP: TestCassandraStorage (0.00s)
=== RUN   TestElasticsearchStorage
    logger.go:146: 2024-07-07T14:33:39.279Z	INFO	config/config.go:192	Elasticsearch detected	{"version": 7}
    logger.go:146: 2024-07-07T14:33:39.284Z	INFO	config/config.go:192	Elasticsearch detected	{"version": 7}
=== RUN   TestElasticsearchStorage/GetServices
    integration.go:337: 2024-07-07 14:33:39.464 Writing trace with 5 spans
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
=== RUN   TestElasticsearchStorage/GetOperations
    integration.go:337: 2024-07-07 14:33:41.234 Writing trace with 5 spans
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
=== RUN   TestElasticsearchStorage/GetTrace
    integration.go:337: 2024-07-07 14:33:42.717 Writing trace with 5 spans
    integration.go:266: trace not found
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
=== RUN   TestElasticsearchStorage/GetTrace/NotFound_error
=== RUN   TestElasticsearchStorage/GetLargeSpans
    integration.go:201: Testing Large Trace over 10K ...
    integration.go:337: 2024-07-07 14:33:44.279 Writing trace with 10008 spans
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
=== RUN   TestElasticsearchStorage/FindTraces
    integration.go:337: 2024-07-07 14:34:15.231 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:15.357 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:15.547 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:15.549 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:15.554 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:15.558 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:15.563 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:15.568 Writing trace with 2 spans
    integration.go:337: 2024-07-07 14:34:15.714 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:15.944 Writing trace with 2 spans
    integration.go:337: 2024-07-07 14:34:15.957 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:15.965 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:15.97  Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:15.979 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:15.988 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:15.995 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:16.001 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:16.007 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:16.014 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:16.021 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:16.034 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:16.043 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:16.05  Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:16.055 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:16.06  Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:16.067 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:16.07  Writing trace with 1 spans
=== RUN   TestElasticsearchStorage/FindTraces/Tag_escaped_operator_+_Operation_name_+_max_Duration
    integration.go:323: Expecting certain number of traces: expected: 1, actual: 0
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
=== RUN   TestElasticsearchStorage/FindTraces/Tag_wildcard_regex
=== RUN   TestElasticsearchStorage/FindTraces/Tags_in_one_spot_-_Tags
=== RUN   TestElasticsearchStorage/FindTraces/Tags_in_one_spot_-_Logs
=== RUN   TestElasticsearchStorage/FindTraces/Tags_in_one_spot_-_Process
=== RUN   TestElasticsearchStorage/FindTraces/Tags_in_different_spots
=== RUN   TestElasticsearchStorage/FindTraces/Trace_spans_over_multiple_indices
=== RUN   TestElasticsearchStorage/FindTraces/Operation_name
=== RUN   TestElasticsearchStorage/FindTraces/Operation_name_+_max_Duration
=== RUN   TestElasticsearchStorage/FindTraces/Operation_name_+_Duration_range
=== RUN   TestElasticsearchStorage/FindTraces/Duration_range
=== RUN   TestElasticsearchStorage/FindTraces/max_Duration
=== RUN   TestElasticsearchStorage/FindTraces/default
=== RUN   TestElasticsearchStorage/FindTraces/Tags_+_Operation_name
=== RUN   TestElasticsearchStorage/FindTraces/Tags_+_Operation_name_+_max_Duration
=== RUN   TestElasticsearchStorage/FindTraces/Tags_+_Operation_name_+_Duration_range
=== RUN   TestElasticsearchStorage/FindTraces/Tags_+_Duration_range
=== RUN   TestElasticsearchStorage/FindTraces/Tags_+_max_Duration
=== RUN   TestElasticsearchStorage/FindTraces/Multi-spot_Tags_+_Operation_name
=== RUN   TestElasticsearchStorage/FindTraces/Multi-spot_Tags_+_Operation_name_+_max_Duration
=== RUN   TestElasticsearchStorage/FindTraces/Multi-spot_Tags_+_Operation_name_+_Duration_range
=== RUN   TestElasticsearchStorage/FindTraces/Multi-spot_Tags_+_Duration_range
=== RUN   TestElasticsearchStorage/FindTraces/Multi-spot_Tags_+_max_Duration
=== RUN   TestElasticsearchStorage/FindTraces/Multiple_Traces
=== RUN   TestElasticsearchStorage/ArchiveTrace
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
    integration.go:141: Waiting for storage backend to update documents, iteration 2 out of 100
=== RUN   TestElasticsearchStorage/GetDependencies
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
    integration.go:141: Waiting for storage backend to update documents, iteration 2 out of 100
=== RUN   TestElasticsearchStorage/GetThroughput
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
=== RUN   TestElasticsearchStorage/GetLatestProbability
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
--- ✅ PASS: TestElasticsearchStorage (45.11s)
    --- ✅ PASS: TestElasticsearchStorage/GetServices (1.77s)
    --- ✅ PASS: TestElasticsearchStorage/GetOperations (1.48s)
    --- ✅ PASS: TestElasticsearchStorage/GetTrace (1.55s)
        --- ✅ PASS: TestElasticsearchStorage/GetTrace/NotFound_error (0.01s)
    --- ✅ PASS: TestElasticsearchStorage/GetLargeSpans (30.96s)
    --- ✅ PASS: TestElasticsearchStorage/FindTraces (2.53s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Tag_escaped_operator_+_Operation_name_+_max_Duration (1.06s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Tag_wildcard_regex (0.03s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Tags_in_one_spot_-_Tags (0.02s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Tags_in_one_spot_-_Logs (0.03s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Tags_in_one_spot_-_Process (0.04s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Tags_in_different_spots (0.02s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Trace_spans_over_multiple_indices (0.01s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Operation_name (0.01s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Operation_name_+_max_Duration (0.01s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Operation_name_+_Duration_range (0.01s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Duration_range (0.02s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/max_Duration (0.01s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/default (0.01s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Tags_+_Operation_name (0.03s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Tags_+_Operation_name_+_max_Duration (0.02s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Tags_+_Operation_name_+_Duration_range (0.04s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Tags_+_Duration_range (0.02s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Tags_+_max_Duration (0.02s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Multi-spot_Tags_+_Operation_name (0.02s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Multi-spot_Tags_+_Operation_name_+_max_Duration (0.03s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Multi-spot_Tags_+_Operation_name_+_Duration_range (0.03s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Multi-spot_Tags_+_Duration_range (0.02s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Multi-spot_Tags_+_max_Duration (0.03s)
        --- ✅ PASS: TestElasticsearchStorage/FindTraces/Multiple_Traces (0.02s)
    --- ✅ PASS: TestElasticsearchStorage/ArchiveTrace (2.04s)
    --- ✅ PASS: TestElasticsearchStorage/GetDependencies (2.03s)
    --- ✅ PASS: TestElasticsearchStorage/GetThroughput (1.20s)
    --- ✅ PASS: TestElasticsearchStorage/GetLatestProbability (1.22s)
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields
    logger.go:146: 2024-07-07T14:34:24.258Z	INFO	config/config.go:192	Elasticsearch detected	{"version": 7}
    logger.go:146: 2024-07-07T14:34:24.260Z	INFO	config/config.go:192	Elasticsearch detected	{"version": 7}
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/GetServices
    integration.go:337: 2024-07-07 14:34:24.303 Writing trace with 5 spans
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/GetOperations
    integration.go:337: 2024-07-07 14:34:25.744 Writing trace with 5 spans
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/GetTrace
    integration.go:337: 2024-07-07 14:34:27.176 Writing trace with 5 spans
    integration.go:266: trace not found
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/GetTrace/NotFound_error
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/GetLargeSpans
    integration.go:201: Testing Large Trace over 10K ...
    integration.go:337: 2024-07-07 14:34:28.573 Writing trace with 10008 spans
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces
    integration.go:337: 2024-07-07 14:34:55.747 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:55.904 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.063 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.069 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.075 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.104 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.109 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.133 Writing trace with 2 spans
    integration.go:337: 2024-07-07 14:34:56.278 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.426 Writing trace with 2 spans
    integration.go:337: 2024-07-07 14:34:56.433 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.437 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.442 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.446 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.454 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.459 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.464 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.491 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.496 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.502 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.507 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.523 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.531 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.537 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.544 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.548 Writing trace with 1 spans
    integration.go:337: 2024-07-07 14:34:56.552 Writing trace with 1 spans
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tag_escaped_operator_+_Operation_name_+_max_Duration
    integration.go:323: Expecting certain number of traces: expected: 1, actual: 0
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tag_wildcard_regex
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_in_one_spot_-_Tags
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_in_one_spot_-_Logs
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_in_one_spot_-_Process
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_in_different_spots
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Trace_spans_over_multiple_indices
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Operation_name
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Operation_name_+_max_Duration
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Operation_name_+_Duration_range
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Duration_range
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/max_Duration
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/default
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_+_Operation_name
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_+_Operation_name_+_max_Duration
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_+_Operation_name_+_Duration_range
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_+_Duration_range
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_+_max_Duration
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Multi-spot_Tags_+_Operation_name
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Multi-spot_Tags_+_Operation_name_+_max_Duration
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Multi-spot_Tags_+_Operation_name_+_Duration_range
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Multi-spot_Tags_+_Duration_range
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Multi-spot_Tags_+_max_Duration
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Multiple_Traces
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/ArchiveTrace
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
    integration.go:141: Waiting for storage backend to update documents, iteration 2 out of 100
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/GetDependencies
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
    integration.go:141: Waiting for storage backend to update documents, iteration 2 out of 100
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/GetThroughput
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields/GetLatestProbability
    integration.go:141: Waiting for storage backend to update documents, iteration 1 out of 100
--- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields (40.21s)
    --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/GetServices (1.45s)
    --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/GetOperations (1.43s)
    --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/GetTrace (1.39s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/GetTrace/NotFound_error (0.01s)
    --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/GetLargeSpans (27.18s)
    --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces (2.28s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tag_escaped_operator_+_Operation_name_+_max_Duration (1.02s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tag_wildcard_regex (0.02s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_in_one_spot_-_Tags (0.02s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_in_one_spot_-_Logs (0.02s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_in_one_spot_-_Process (0.02s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_in_different_spots (0.02s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Trace_spans_over_multiple_indices (0.01s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Operation_name (0.01s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Operation_name_+_max_Duration (0.01s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Operation_name_+_Duration_range (0.01s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Duration_range (0.01s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/max_Duration (0.01s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/default (0.01s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_+_Operation_name (0.01s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_+_Operation_name_+_max_Duration (0.02s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_+_Operation_name_+_Duration_range (0.02s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_+_Duration_range (0.02s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Tags_+_max_Duration (0.01s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Multi-spot_Tags_+_Operation_name (0.02s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Multi-spot_Tags_+_Operation_name_+_max_Duration (0.02s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Multi-spot_Tags_+_Operation_name_+_Duration_range (0.02s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Multi-spot_Tags_+_Duration_range (0.02s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Multi-spot_Tags_+_max_Duration (0.02s)
        --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/FindTraces/Multiple_Traces (0.01s)
    --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/ArchiveTrace (2.04s)
    --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/GetDependencies (2.03s)
    --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/GetThroughput (1.20s)
    --- ✅ PASS: TestElasticsearchStorage_AllTagsAsObjectFields/GetLatestProbability (1.18s)
=== RUN   TestElasticsearchStorage_IndexTemplates
    logger.go:146: 2024-07-07T14:35:04.469Z	INFO	config/config.go:192	Elasticsearch detected	{"version": 7}
    logger.go:146: 2024-07-07T14:35:04.471Z	INFO	config/config.go:192	Elasticsearch detected	{"version": 7}
--- ✅ PASS: TestElasticsearchStorage_IndexTemplates (0.07s)
=== RUN   TestIndexCleaner_doNotFailOnEmptyStorage
Unable to find image 'localhost:5000/jaegertracing/jaeger-es-index-cleaner:local-test' locally
local-test: Pulling from jaegertracing/jaeger-es-index-cleaner
ec99f8b99825: Already exists
6815e1a226d3: Pulling fs layer
3ca1d0ce953a: Pulling fs layer
a578d28701c0: Pulling fs layer
6815e1a226d3: Verifying Checksum
6815e1a226d3: Download complete
3ca1d0ce953a: Verifying Checksum
3ca1d0ce953a: Download complete
6815e1a226d3: Pull complete
a578d28701c0: Verifying Checksum
a578d28701c0: Download complete
3ca1d0ce953a: Pull complete
a578d28701c0: Pull complete
Digest: sha256:07a38e3296131aefb22017abdbda52ba1b27e5cf98b6b04438fc11c88a6d3776
Status: Downloaded newer image for localhost:5000/jaegertracing/jaeger-es-index-cleaner:local-test
{"level":"info","ts":1720362904.9210947,"caller":"es-index-cleaner/main.go:89","msg":"Indices before this date will be deleted","date":"2024-07-01T00:00:00Z"}
{"level":"info","ts":1720362904.9211366,"caller":"es-index-cleaner/main.go:98","msg":"Queried indices","indices":null}
{"level":"info","ts":1720362904.9212031,"caller":"es-index-cleaner/main.go:102","msg":"No indices to delete"}

{"level":"info","ts":1720362905.0846863,"caller":"es-index-cleaner/main.go:89","msg":"Indices before this date will be deleted","date":"2024-07-01T00:00:00Z"}
{"level":"info","ts":1720362905.0847511,"caller":"es-index-cleaner/main.go:98","msg":"Queried indices","indices":null}
{"level":"info","ts":1720362905.085358,"caller":"es-index-cleaner/main.go:102","msg":"No indices to delete"}

{"level":"info","ts":1720362905.2577708,"caller":"es-index-cleaner/main.go:89","msg":"Indices before this date will be deleted","date":"2024-07-01T00:00:00Z"}
{"level":"info","ts":1720362905.2578034,"caller":"es-index-cleaner/main.go:98","msg":"Queried indices","indices":null}
{"level":"info","ts":1720362905.258227,"caller":"es-index-cleaner/main.go:102","msg":"No indices to delete"}

--- ✅ PASS: TestIndexCleaner_doNotFailOnEmptyStorage (0.77s)
=== RUN   TestIndexCleaner_doNotFailOnFullStorage
Unable to find image 'jaegertracing/jaeger-es-rollover:1.57.0' locally
1.57.0: Pulling from jaegertracing/jaeger-es-rollover
a88dc8b54e91: Already exists
6b84b6642faa: Pulling fs layer
a9e1d35f515c: Pulling fs layer
b50e24a58401: Pulling fs layer
a9e1d35f515c: Verifying Checksum
a9e1d35f515c: Download complete
6b84b6642faa: Verifying Checksum
6b84b6642faa: Download complete
6b84b6642faa: Pull complete
a9e1d35f515c: Pull complete
b50e24a58401: Verifying Checksum
b50e24a58401: Download complete
b50e24a58401: Pull complete
Digest: sha256:9eeead0a49d18ebddf67b5798fbb46c8ba2e4d221a6cfdb2a138beebaa4108bc
Status: Downloaded newer image for jaegertracing/jaeger-es-rollover:1.57.0




{"level":"info","ts":1720362909.1626267,"caller":"es-index-cleaner/main.go:89","msg":"Indices before this date will be deleted","date":"2020-05-30T00:00:00Z"}
{"level":"info","ts":1720362909.1626666,"caller":"es-index-cleaner/main.go:98","msg":"Queried indices","indices":[{"Index":"jaeger-span-000001","CreationTime":"2024-07-07T14:35:07.955Z","Aliases":{"jaeger-span-read":true}},{"Index":"jaeger-span-2019-01-01","CreationTime":"2024-07-07T14:35:05.303Z","Aliases":{}},{"Index":"jaeger-span-archive-000001","CreationTime":"2024-07-07T14:35:07.341Z","Aliases":{"jaeger-span-archive-read":true}},{"Index":"jaeger-span-archive-000002","CreationTime":"2024-07-07T14:35:07.649Z","Aliases":{"jaeger-span-archive-read":true,"jaeger-span-archive-write":true}},{"Index":"jaeger-dependencies-000001","CreationTime":"2024-07-07T14:35:08.277Z","Aliases":{"jaeger-dependencies-read":true}},{"Index":"jaeger-service-2019-01-01","CreationTime":"2024-07-07T14:35:05.358Z","Aliases":{}},{"Index":"jaeger-sampling-2019-01-01","CreationTime":"2024-07-07T14:35:05.458Z","Aliases":{}},{"Index":"jaeger-service-000001","CreationTime":"2024-07-07T14:35:08.118Z","Aliases":{"jaeger-service-read":true}},{"Index":"jaeger-service-000002","CreationTime":"2024-07-07T14:35:08.721Z","Aliases":{"jaeger-service-read":true,"jaeger-service-write":true}},{"Index":"jaeger-span-000002","CreationTime":"2024-07-07T14:35:08.569Z","Aliases":{"jaeger-span-read":true,"jaeger-span-write":true}},{"Index":"jaeger-span-archive","CreationTime":"2024-07-07T14:35:05.512Z","Aliases":{}},{"Index":"jaeger-dependencies-000002","CreationTime":"2024-07-07T14:35:08.854Z","Aliases":{"jaeger-dependencies-read":true,"jaeger-dependencies-write":true}},{"Index":"jaeger-dependencies-2019-01-01","CreationTime":"2024-07-07T14:35:05.409Z","Aliases":{}}]}
{"level":"info","ts":1720362909.1628218,"caller":"es-index-cleaner/main.go:102","msg":"No indices to delete"}





{"level":"info","ts":1720362911.7389581,"caller":"es-index-cleaner/main.go:89","msg":"Indices before this date will be deleted","date":"2020-05-30T00:00:00Z"}
{"level":"info","ts":1720362911.7389948,"caller":"es-index-cleaner/main.go:98","msg":"Queried indices","indices":[{"Index":"jaeger-span-archive","CreationTime":"2024-07-07T14:35:09.709Z","Aliases":{}},{"Index":"jaeger-span-archive-000001","CreationTime":"2024-07-07T14:35:09.956Z","Aliases":{"jaeger-span-archive-read":true}},{"Index":"jaeger-span-000001","CreationTime":"2024-07-07T14:35:10.575Z","Aliases":{"jaeger-span-read":true}},{"Index":"jaeger-span-000002","CreationTime":"2024-07-07T14:35:11.112Z","Aliases":{"jaeger-span-read":true,"jaeger-span-write":true}},{"Index":"jaeger-span-2019-01-01","CreationTime":"2024-07-07T14:35:09.292Z","Aliases":{}},{"Index":"jaeger-sampling-2019-01-01","CreationTime":"2024-07-07T14:35:09.657Z","Aliases":{}},{"Index":"jaeger-service-000001","CreationTime":"2024-07-07T14:35:10.708Z","Aliases":{"jaeger-service-read":true}},{"Index":"jaeger-service-000002","CreationTime":"2024-07-07T14:35:11.244Z","Aliases":{"jaeger-service-read":true,"jaeger-service-write":true}},{"Index":"jaeger-service-2019-01-01","CreationTime":"2024-07-07T14:35:09.415Z","Aliases":{}},{"Index":"jaeger-span-archive-000002","CreationTime":"2024-07-07T14:35:10.281Z","Aliases":{"jaeger-span-archive-read":true,"jaeger-span-archive-write":true}},{"Index":"jaeger-dependencies-000001","CreationTime":"2024-07-07T14:35:10.826Z","Aliases":{"jaeger-dependencies-read":true}},{"Index":"jaeger-dependencies-000002","CreationTime":"2024-07-07T14:35:11.397Z","Aliases":{"jaeger-dependencies-read":true,"jaeger-dependencies-write":true}},{"Index":"jaeger-dependencies-2019-01-01","CreationTime":"2024-07-07T14:35:09.535Z","Aliases":{}}]}
{"level":"info","ts":1720362911.7392333,"caller":"es-index-cleaner/main.go:102","msg":"No indices to delete"}





{"level":"info","ts":1720362914.322415,"caller":"es-index-cleaner/main.go:89","msg":"Indices before this date will be deleted","date":"2020-05-30T00:00:00Z"}
{"level":"info","ts":1720362914.3224556,"caller":"es-index-cleaner/main.go:98","msg":"Queried indices","indices":[{"Index":"jaeger-span-archive","CreationTime":"2024-07-07T14:35:12.298Z","Aliases":{}},{"Index":"jaeger-span-archive-000002","CreationTime":"2024-07-07T14:35:12.842Z","Aliases":{"jaeger-span-archive-read":true,"jaeger-span-archive-write":true}},{"Index":"jaeger-sampling-2019-01-01","CreationTime":"2024-07-07T14:35:12.245Z","Aliases":{}},{"Index":"jaeger-span-000002","CreationTime":"2024-07-07T14:35:13.737Z","Aliases":{"jaeger-span-read":true,"jaeger-span-write":true}},{"Index":"jaeger-span-2019-01-01","CreationTime":"2024-07-07T14:35:11.896Z","Aliases":{}},{"Index":"jaeger-service-000001","CreationTime":"2024-07-07T14:35:13.314Z","Aliases":{"jaeger-service-read":true}},{"Index":"jaeger-service-000002","CreationTime":"2024-07-07T14:35:13.876Z","Aliases":{"jaeger-service-read":true,"jaeger-service-write":true}},{"Index":"jaeger-service-2019-01-01","CreationTime":"2024-07-07T14:35:12.02Z","Aliases":{}},{"Index":"jaeger-span-000001","CreationTime":"2024-07-07T14:35:13.157Z","Aliases":{"jaeger-span-read":true}},{"Index":"jaeger-span-archive-000001","CreationTime":"2024-07-07T14:35:12.545Z","Aliases":{"jaeger-span-archive-read":true}},{"Index":"jaeger-dependencies-000001","CreationTime":"2024-07-07T14:35:13.444Z","Aliases":{"jaeger-dependencies-read":true}},{"Index":"jaeger-dependencies-000002","CreationTime":"2024-07-07T14:35:14.01Z","Aliases":{"jaeger-dependencies-read":true,"jaeger-dependencies-write":true}},{"Index":"jaeger-dependencies-2019-01-01","CreationTime":"2024-07-07T14:35:12.132Z","Aliases":{}}]}
{"level":"info","ts":1720362914.3226008,"caller":"es-index-cleaner/main.go:102","msg":"No indices to delete"}

--- ✅ PASS: TestIndexCleaner_doNotFailOnFullStorage (9.06s)
=== RUN   TestIndexCleaner
=== RUN   TestIndexCleaner/RemoveDailyIndices_no_prefix,_[]




{"level":"info","ts":1720362916.7796817,"caller":"es-index-cleaner/main.go:89","msg":"Indices before this date will be deleted","date":"2024-07-08T00:00:00Z"}
{"level":"info","ts":1720362916.7797277,"caller":"es-index-cleaner/main.go:98","msg":"Queried indices","indices":[{"Index":"jaeger-dependencies-000001","CreationTime":"2024-07-07T14:35:15.9Z","Aliases":{"jaeger-dependencies-read":true}},{"Index":"jaeger-dependencies-000002","CreationTime":"2024-07-07T14:35:16.476Z","Aliases":{"jaeger-dependencies-read":true,"jaeger-dependencies-write":true}},{"Index":"jaeger-sampling-2019-01-01","CreationTime":"2024-07-07T14:35:14.782Z","Aliases":{}},{"Index":"jaeger-service-000001","CreationTime":"2024-07-07T14:35:15.766Z","Aliases":{"jaeger-service-read":true}},{"Index":"jaeger-service-2019-01-01","CreationTime":"2024-07-07T14:35:14.579Z","Aliases":{}},{"Index":"jaeger-span-000002","CreationTime":"2024-07-07T14:35:16.183Z","Aliases":{"jaeger-span-read":true,"jaeger-span-write":true}},{"Index":"jaeger-span-archive-000001","CreationTime":"2024-07-07T14:35:15.05Z","Aliases":{"jaeger-span-archive-read":true}},{"Index":"jaeger-dependencies-2019-01-01","CreationTime":"2024-07-07T14:35:14.681Z","Aliases":{}},{"Index":"jaeger-service-000002","CreationTime":"2024-07-07T14:35:16.329Z","Aliases":{"jaeger-service-read":true,"jaeger-service-write":true}},{"Index":"jaeger-span-000001","CreationTime":"2024-07-07T14:35:15.638Z","Aliases":{"jaeger-span-read":true}},{"Index":"jaeger-span-2019-01-01","CreationTime":"2024-07-07T14:35:14.469Z","Aliases":{}},{"Index":"jaeger-span-archive","CreationTime":"2024-07-07T14:35:14.83Z","Aliases":{}},{"Index":"jaeger-span-archive-000002","CreationTime":"2024-07-07T14:35:15.339Z","Aliases":{"jaeger-span-archive-read":true,"jaeger-span-archive-write":true}}]}
{"level":"info","ts":1720362916.7799098,"caller":"es-index-cleaner/main.go:105","msg":"Deleting indices","indices":[{"Index":"jaeger-sampling-2019-01-01","CreationTime":"2024-07-07T14:35:14.782Z","Aliases":{}},{"Index":"jaeger-service-2019-01-01","CreationTime":"2024-07-07T14:35:14.579Z","Aliases":{}},{"Index":"jaeger-dependencies-2019-01-01","CreationTime":"2024-07-07T14:35:14.681Z","Aliases":{}},{"Index":"jaeger-span-2019-01-01","CreationTime":"2024-07-07T14:35:14.469Z","Aliases":{}}]}

=== RUN   TestIndexCleaner/RemoveDailyIndices_prefix,_[]




{"level":"info","ts":1720362919.2299435,"caller":"es-index-cleaner/main.go:89","msg":"Indices before this date will be deleted","date":"2024-07-08T00:00:00Z"}
{"level":"info","ts":1720362919.2299836,"caller":"es-index-cleaner/main.go:98","msg":"Queried indices","indices":[{"Index":"integration-test-jaeger-dependencies-000001","CreationTime":"2024-07-07T14:35:18.314Z","Aliases":{"integration-test-jaeger-dependencies-read":true}},{"Index":"integration-test-jaeger-dependencies-000002","CreationTime":"2024-07-07T14:35:18.925Z","Aliases":{"integration-test-jaeger-dependencies-read":true,"integration-test-jaeger-dependencies-write":true}},{"Index":"integration-test-jaeger-service-2019-01-01","CreationTime":"2024-07-07T14:35:17.137Z","Aliases":{}},{"Index":"integration-test-jaeger-span-000001","CreationTime":"2024-07-07T14:35:18.022Z","Aliases":{"integration-test-jaeger-span-read":true}},{"Index":"integration-test-jaeger-span-2019-01-01","CreationTime":"2024-07-07T14:35:17.092Z","Aliases":{}},{"Index":"integration-test-jaeger-span-archive","CreationTime":"2024-07-07T14:35:17.254Z","Aliases":{}},{"Index":"integration-test-jaeger-dependencies-2019-01-01","CreationTime":"2024-07-07T14:35:17.18Z","Aliases":{}},{"Index":"integration-test-jaeger-sampling-2019-01-01","CreationTime":"2024-07-07T14:35:17.219Z","Aliases":{}},{"Index":"integration-test-jaeger-service-000001","CreationTime":"2024-07-07T14:35:18.162Z","Aliases":{"integration-test-jaeger-service-read":true}},{"Index":"integration-test-jaeger-service-000002","CreationTime":"2024-07-07T14:35:18.769Z","Aliases":{"integration-test-jaeger-service-read":true,"integration-test-jaeger-service-write":true}},{"Index":"integration-test-jaeger-span-000002","CreationTime":"2024-07-07T14:35:18.641Z","Aliases":{"integration-test-jaeger-span-read":true,"integration-test-jaeger-span-write":true}},{"Index":"integration-test-jaeger-span-archive-000001","CreationTime":"2024-07-07T14:35:17.425Z","Aliases":{"integration-test-jaeger-span-archive-read":true}},{"Index":"integration-test-jaeger-span-archive-000002","CreationTime":"2024-07-07T14:35:17.729Z","Aliases":{"integration-test-jaeger-span-archive-read":true,"integration-test-jaeger-span-archive-write":true}}]}
{"level":"info","ts":1720362919.2301319,"caller":"es-index-cleaner/main.go:105","msg":"Deleting indices","indices":[{"Index":"integration-test-jaeger-service-2019-01-01","CreationTime":"2024-07-07T14:35:17.137Z","Aliases":{}},{"Index":"integration-test-jaeger-span-2019-01-01","CreationTime":"2024-07-07T14:35:17.092Z","Aliases":{}},{"Index":"integration-test-jaeger-dependencies-2019-01-01","CreationTime":"2024-07-07T14:35:17.18Z","Aliases":{}},{"Index":"integration-test-jaeger-sampling-2019-01-01","CreationTime":"2024-07-07T14:35:17.219Z","Aliases":{}}]}

=== RUN   TestIndexCleaner/RemoveRolloverIndices_no_prefix,_[ROLLOVER=true]




{"level":"info","ts":1720362921.5989633,"caller":"es-index-cleaner/main.go:89","msg":"Indices before this date will be deleted","date":"2024-07-08T00:00:00Z"}
{"level":"info","ts":1720362921.5989966,"caller":"es-index-cleaner/main.go:98","msg":"Queried indices","indices":[{"Index":"jaeger-service-2019-01-01","CreationTime":"2024-07-07T14:35:19.537Z","Aliases":{}},{"Index":"jaeger-span-archive","CreationTime":"2024-07-07T14:35:19.685Z","Aliases":{}},{"Index":"jaeger-span-archive-000002","CreationTime":"2024-07-07T14:35:20.119Z","Aliases":{"jaeger-span-archive-read":true,"jaeger-span-archive-write":true}},{"Index":"jaeger-sampling-2019-01-01","CreationTime":"2024-07-07T14:35:19.641Z","Aliases":{}},{"Index":"jaeger-service-000001","CreationTime":"2024-07-07T14:35:20.53Z","Aliases":{"jaeger-service-read":true}},{"Index":"jaeger-service-000002","CreationTime":"2024-07-07T14:35:21.184Z","Aliases":{"jaeger-service-read":true,"jaeger-service-write":true}},{"Index":"jaeger-span-000001","CreationTime":"2024-07-07T14:35:20.389Z","Aliases":{"jaeger-span-read":true}},{"Index":"jaeger-span-000002","CreationTime":"2024-07-07T14:35:21.046Z","Aliases":{"jaeger-span-read":true,"jaeger-span-write":true}},{"Index":"jaeger-dependencies-000001","CreationTime":"2024-07-07T14:35:20.68Z","Aliases":{"jaeger-dependencies-read":true}},{"Index":"jaeger-dependencies-000002","CreationTime":"2024-07-07T14:35:21.31Z","Aliases":{"jaeger-dependencies-read":true,"jaeger-dependencies-write":true}},{"Index":"jaeger-dependencies-2019-01-01","CreationTime":"2024-07-07T14:35:19.58Z","Aliases":{}},{"Index":"jaeger-span-2019-01-01","CreationTime":"2024-07-07T14:35:19.494Z","Aliases":{}},{"Index":"jaeger-span-archive-000001","CreationTime":"2024-07-07T14:35:19.862Z","Aliases":{"jaeger-span-archive-read":true}}]}
{"level":"info","ts":1720362921.59916,"caller":"es-index-cleaner/main.go:105","msg":"Deleting indices","indices":[{"Index":"jaeger-service-000001","CreationTime":"2024-07-07T14:35:20.53Z","Aliases":{"jaeger-service-read":true}},{"Index":"jaeger-span-000001","CreationTime":"2024-07-07T14:35:20.389Z","Aliases":{"jaeger-span-read":true}},{"Index":"jaeger-dependencies-000001","CreationTime":"2024-07-07T14:35:20.68Z","Aliases":{"jaeger-dependencies-read":true}}]}

=== RUN   TestIndexCleaner/RemoveRolloverIndices_prefix,_[ROLLOVER=true]




{"level":"info","ts":1720362923.9129343,"caller":"es-index-cleaner/main.go:89","msg":"Indices before this date will be deleted","date":"2024-07-08T00:00:00Z"}
{"level":"info","ts":1720362923.9129803,"caller":"es-index-cleaner/main.go:98","msg":"Queried indices","indices":[{"Index":"integration-test-jaeger-service-000001","CreationTime":"2024-07-07T14:35:22.853Z","Aliases":{"integration-test-jaeger-service-read":true}},{"Index":"integration-test-jaeger-span-000001","CreationTime":"2024-07-07T14:35:22.738Z","Aliases":{"integration-test-jaeger-span-read":true}},{"Index":"integration-test-jaeger-span-2019-01-01","CreationTime":"2024-07-07T14:35:21.862Z","Aliases":{}},{"Index":"integration-test-jaeger-dependencies-000001","CreationTime":"2024-07-07T14:35:23Z","Aliases":{"integration-test-jaeger-dependencies-read":true}},{"Index":"integration-test-jaeger-dependencies-2019-01-01","CreationTime":"2024-07-07T14:35:21.937Z","Aliases":{}},{"Index":"integration-test-jaeger-sampling-2019-01-01","CreationTime":"2024-07-07T14:35:21.977Z","Aliases":{}},{"Index":"integration-test-jaeger-service-000002","CreationTime":"2024-07-07T14:35:23.445Z","Aliases":{"integration-test-jaeger-service-read":true,"integration-test-jaeger-service-write":true}},{"Index":"integration-test-jaeger-service-2019-01-01","CreationTime":"2024-07-07T14:35:21.898Z","Aliases":{}},{"Index":"integration-test-jaeger-span-000002","CreationTime":"2024-07-07T14:35:23.296Z","Aliases":{"integration-test-jaeger-span-read":true,"integration-test-jaeger-span-write":true}},{"Index":"integration-test-jaeger-span-archive","CreationTime":"2024-07-07T14:35:22.011Z","Aliases":{}},{"Index":"integration-test-jaeger-span-archive-000001","CreationTime":"2024-07-07T14:35:22.189Z","Aliases":{"integration-test-jaeger-span-archive-read":true}},{"Index":"integration-test-jaeger-dependencies-000002","CreationTime":"2024-07-07T14:35:23.612Z","Aliases":{"integration-test-jaeger-dependencies-read":true,"integration-test-jaeger-dependencies-write":true}},{"Index":"integration-test-jaeger-span-archive-000002","CreationTime":"2024-07-07T14:35:22.457Z","Aliases":{"integration-test-jaeger-span-archive-read":true,"integration-test-jaeger-span-archive-write":true}}]}
{"level":"info","ts":1720362923.9131546,"caller":"es-index-cleaner/main.go:105","msg":"Deleting indices","indices":[{"Index":"integration-test-jaeger-service-000001","CreationTime":"2024-07-07T14:35:22.853Z","Aliases":{"integration-test-jaeger-service-read":true}},{"Index":"integration-test-jaeger-span-000001","CreationTime":"2024-07-07T14:35:22.738Z","Aliases":{"integration-test-jaeger-span-read":true}},{"Index":"integration-test-jaeger-dependencies-000001","CreationTime":"2024-07-07T14:35:23Z","Aliases":{"integration-test-jaeger-dependencies-read":true}}]}

=== RUN   TestIndexCleaner/RemoveArchiveIndices_no_prefix,_[ARCHIVE=true]




{"level":"info","ts":1720362926.2564833,"caller":"es-index-cleaner/main.go:89","msg":"Indices before this date will be deleted","date":"2024-07-08T00:00:00Z"}
{"level":"info","ts":1720362926.2565227,"caller":"es-index-cleaner/main.go:98","msg":"Queried indices","indices":[{"Index":"jaeger-sampling-2019-01-01","CreationTime":"2024-07-07T14:35:24.307Z","Aliases":{}},{"Index":"jaeger-service-000001","CreationTime":"2024-07-07T14:35:25.244Z","Aliases":{"jaeger-service-read":true}},{"Index":"jaeger-service-000002","CreationTime":"2024-07-07T14:35:25.804Z","Aliases":{"jaeger-service-read":true,"jaeger-service-write":true}},{"Index":"jaeger-service-2019-01-01","CreationTime":"2024-07-07T14:35:24.214Z","Aliases":{}},{"Index":"jaeger-span-000001","CreationTime":"2024-07-07T14:35:25.085Z","Aliases":{"jaeger-span-read":true}},{"Index":"jaeger-span-2019-01-01","CreationTime":"2024-07-07T14:35:24.174Z","Aliases":{}},{"Index":"jaeger-span-archive-000001","CreationTime":"2024-07-07T14:35:24.549Z","Aliases":{"jaeger-span-archive-read":true}},{"Index":"jaeger-dependencies-000002","CreationTime":"2024-07-07T14:35:25.936Z","Aliases":{"jaeger-dependencies-read":true,"jaeger-dependencies-write":true}},{"Index":"jaeger-span-archive-000002","CreationTime":"2024-07-07T14:35:24.817Z","Aliases":{"jaeger-span-archive-read":true,"jaeger-span-archive-write":true}},{"Index":"jaeger-dependencies-2019-01-01","CreationTime":"2024-07-07T14:35:24.258Z","Aliases":{}},{"Index":"jaeger-span-000002","CreationTime":"2024-07-07T14:35:25.676Z","Aliases":{"jaeger-span-read":true,"jaeger-span-write":true}},{"Index":"jaeger-span-archive","CreationTime":"2024-07-07T14:35:24.358Z","Aliases":{}},{"Index":"jaeger-dependencies-000001","CreationTime":"2024-07-07T14:35:25.391Z","Aliases":{"jaeger-dependencies-read":true}}]}
{"level":"info","ts":1720362926.2566826,"caller":"es-index-cleaner/main.go:105","msg":"Deleting indices","indices":[{"Index":"jaeger-span-archive-000001","CreationTime":"2024-07-07T14:35:24.549Z","Aliases":{"jaeger-span-archive-read":true}}]}

=== RUN   TestIndexCleaner/RemoveArchiveIndices_prefix,_[ARCHIVE=true]




{"level":"info","ts":1720362928.534238,"caller":"es-index-cleaner/main.go:89","msg":"Indices before this date will be deleted","date":"2024-07-08T00:00:00Z"}
{"level":"info","ts":1720362928.5342734,"caller":"es-index-cleaner/main.go:98","msg":"Queried indices","indices":[{"Index":"integration-test-jaeger-service-2019-01-01","CreationTime":"2024-07-07T14:35:26.567Z","Aliases":{}},{"Index":"integration-test-jaeger-span-2019-01-01","CreationTime":"2024-07-07T14:35:26.524Z","Aliases":{}},{"Index":"integration-test-jaeger-span-archive-000001","CreationTime":"2024-07-07T14:35:26.871Z","Aliases":{"integration-test-jaeger-span-archive-read":true}},{"Index":"integration-test-jaeger-span-archive-000002","CreationTime":"2024-07-07T14:35:27.149Z","Aliases":{"integration-test-jaeger-span-archive-read":true,"integration-test-jaeger-span-archive-write":true}},{"Index":"integration-test-jaeger-dependencies-000001","CreationTime":"2024-07-07T14:35:27.714Z","Aliases":{"integration-test-jaeger-dependencies-read":true}},{"Index":"integration-test-jaeger-sampling-2019-01-01","CreationTime":"2024-07-07T14:35:26.661Z","Aliases":{}},{"Index":"integration-test-jaeger-service-000001","CreationTime":"2024-07-07T14:35:27.567Z","Aliases":{"integration-test-jaeger-service-read":true}},{"Index":"integration-test-jaeger-service-000002","CreationTime":"2024-07-07T14:35:28.122Z","Aliases":{"integration-test-jaeger-service-read":true,"integration-test-jaeger-service-write":true}},{"Index":"integration-test-jaeger-span-000001","CreationTime":"2024-07-07T14:35:27.416Z","Aliases":{"integration-test-jaeger-span-read":true}},{"Index":"integration-test-jaeger-span-000002","CreationTime":"2024-07-07T14:35:27.992Z","Aliases":{"integration-test-jaeger-span-read":true,"integration-test-jaeger-span-write":true}},{"Index":"integration-test-jaeger-span-archive","CreationTime":"2024-07-07T14:35:26.698Z","Aliases":{}},{"Index":"integration-test-jaeger-dependencies-000002","CreationTime":"2024-07-07T14:35:28.256Z","Aliases":{"integration-test-jaeger-dependencies-read":true,"integration-test-jaeger-dependencies-write":true}},{"Index":"integration-test-jaeger-dependencies-2019-01-01","CreationTime":"2024-07-07T14:35:26.615Z","Aliases":{}}]}
{"level":"info","ts":1720362928.5344167,"caller":"es-index-cleaner/main.go:105","msg":"Deleting indices","indices":[{"Index":"integration-test-jaeger-span-archive-000001","CreationTime":"2024-07-07T14:35:26.871Z","Aliases":{"integration-test-jaeger-span-archive-read":true}}]}

=== RUN   TestIndexCleaner/RemoveDailyIndices_with_adaptiveSampling_no_prefix,_[]




{"level":"info","ts":1720362931.1347687,"caller":"es-index-cleaner/main.go:89","msg":"Indices before this date will be deleted","date":"2024-07-08T00:00:00Z"}
{"level":"info","ts":1720362931.1348076,"caller":"es-index-cleaner/main.go:98","msg":"Queried indices","indices":[{"Index":"jaeger-sampling-2019-01-01","CreationTime":"2024-07-07T14:35:28.93Z","Aliases":{}},{"Index":"jaeger-service-2019-01-01","CreationTime":"2024-07-07T14:35:28.83Z","Aliases":{}},{"Index":"jaeger-span-000002","CreationTime":"2024-07-07T14:35:30.474Z","Aliases":{"jaeger-span-read":true,"jaeger-span-write":true}},{"Index":"jaeger-dependencies-000002","CreationTime":"2024-07-07T14:35:30.715Z","Aliases":{"jaeger-dependencies-read":true,"jaeger-dependencies-write":true}},{"Index":"jaeger-service-000001","CreationTime":"2024-07-07T14:35:29.913Z","Aliases":{"jaeger-service-read":true}},{"Index":"jaeger-service-000002","CreationTime":"2024-07-07T14:35:30.589Z","Aliases":{"jaeger-service-read":true,"jaeger-service-write":true}},{"Index":"jaeger-span-2019-01-01","CreationTime":"2024-07-07T14:35:28.784Z","Aliases":{}},{"Index":"jaeger-dependencies-000001","CreationTime":"2024-07-07T14:35:30.055Z","Aliases":{"jaeger-dependencies-read":true}},{"Index":"jaeger-sampling-000002","CreationTime":"2024-07-07T14:35:30.856Z","Aliases":{"jaeger-sampling-read":true,"jaeger-sampling-write":true}},{"Index":"jaeger-span-000001","CreationTime":"2024-07-07T14:35:29.765Z","Aliases":{"jaeger-span-read":true}},{"Index":"jaeger-span-archive","CreationTime":"2024-07-07T14:35:28.975Z","Aliases":{}},{"Index":"jaeger-span-archive-000002","CreationTime":"2024-07-07T14:35:29.463Z","Aliases":{"jaeger-span-archive-read":true,"jaeger-span-archive-write":true}},{"Index":"jaeger-dependencies-2019-01-01","CreationTime":"2024-07-07T14:35:28.879Z","Aliases":{}},{"Index":"jaeger-sampling-000001","CreationTime":"2024-07-07T14:35:30.191Z","Aliases":{"jaeger-sampling-read":true}},{"Index":"jaeger-span-archive-000001","CreationTime":"2024-07-07T14:35:29.173Z","Aliases":{"jaeger-span-archive-read":true}}]}
{"level":"info","ts":1720362931.1354265,"caller":"es-index-cleaner/main.go:105","msg":"Deleting indices","indices":[{"Index":"jaeger-sampling-2019-01-01","CreationTime":"2024-07-07T14:35:28.93Z","Aliases":{}},{"Index":"jaeger-service-2019-01-01","CreationTime":"2024-07-07T14:35:28.83Z","Aliases":{}},{"Index":"jaeger-span-2019-01-01","CreationTime":"2024-07-07T14:35:28.784Z","Aliases":{}},{"Index":"jaeger-dependencies-2019-01-01","CreationTime":"2024-07-07T14:35:28.879Z","Aliases":{}}]}

=== RUN   TestIndexCleaner/RemoveDailyIndices_with_adaptiveSampling_prefix,_[]




{"level":"info","ts":1720362933.6458547,"caller":"es-index-cleaner/main.go:89","msg":"Indices before this date will be deleted","date":"2024-07-08T00:00:00Z"}
{"level":"info","ts":1720362933.6458883,"caller":"es-index-cleaner/main.go:98","msg":"Queried indices","indices":[{"Index":"integration-test-jaeger-dependencies-2019-01-01","CreationTime":"2024-07-07T14:35:31.492Z","Aliases":{}},{"Index":"integration-test-jaeger-sampling-2019-01-01","CreationTime":"2024-07-07T14:35:31.537Z","Aliases":{}},{"Index":"integration-test-jaeger-service-2019-01-01","CreationTime":"2024-07-07T14:35:31.446Z","Aliases":{}},{"Index":"integration-test-jaeger-span-2019-01-01","CreationTime":"2024-07-07T14:35:31.4Z","Aliases":{}},{"Index":"integration-test-jaeger-span-archive-000001","CreationTime":"2024-07-07T14:35:31.761Z","Aliases":{"integration-test-jaeger-span-archive-read":true}},{"Index":"integration-test-jaeger-dependencies-000002","CreationTime":"2024-07-07T14:35:33.263Z","Aliases":{"integration-test-jaeger-dependencies-read":true,"integration-test-jaeger-dependencies-write":true}},{"Index":"integration-test-jaeger-sampling-000001","CreationTime":"2024-07-07T14:35:32.737Z","Aliases":{"integration-test-jaeger-sampling-read":true}},{"Index":"integration-test-jaeger-span-000001","CreationTime":"2024-07-07T14:35:32.322Z","Aliases":{"integration-test-jaeger-span-read":true}},{"Index":"integration-test-jaeger-span-000002","CreationTime":"2024-07-07T14:35:33.009Z","Aliases":{"integration-test-jaeger-span-read":true,"integration-test-jaeger-span-write":true}},{"Index":"integration-test-jaeger-span-archive-000002","CreationTime":"2024-07-07T14:35:32.037Z","Aliases":{"integration-test-jaeger-span-archive-read":true,"integration-test-jaeger-span-archive-write":true}},{"Index":"integration-test-jaeger-dependencies-000001","CreationTime":"2024-07-07T14:35:32.599Z","Aliases":{"integration-test-jaeger-dependencies-read":true}},{"Index":"integration-test-jaeger-sampling-000002","CreationTime":"2024-07-07T14:35:33.37Z","Aliases":{"integration-test-jaeger-sampling-read":true,"integration-test-jaeger-sampling-write":true}},{"Index":"integration-test-jaeger-span-archive","CreationTime":"2024-07-07T14:35:31.58Z","Aliases":{}},{"Index":"integration-test-jaeger-service-000001","CreationTime":"2024-07-07T14:35:32.452Z","Aliases":{"integration-test-jaeger-service-read":true}},{"Index":"integration-test-jaeger-service-000002","CreationTime":"2024-07-07T14:35:33.141Z","Aliases":{"integration-test-jaeger-service-read":true,"integration-test-jaeger-service-write":true}}]}
{"level":"info","ts":1720362933.646053,"caller":"es-index-cleaner/main.go:105","msg":"Deleting indices","indices":[{"Index":"integration-test-jaeger-dependencies-2019-01-01","CreationTime":"2024-07-07T14:35:31.492Z","Aliases":{}},{"Index":"integration-test-jaeger-sampling-2019-01-01","CreationTime":"2024-07-07T14:35:31.537Z","Aliases":{}},{"Index":"integration-test-jaeger-service-2019-01-01","CreationTime":"2024-07-07T14:35:31.446Z","Aliases":{}},{"Index":"integration-test-jaeger-span-2019-01-01","CreationTime":"2024-07-07T14:35:31.4Z","Aliases":{}}]}

--- ✅ PASS: TestIndexCleaner (19.37s)
    --- ✅ PASS: TestIndexCleaner/RemoveDailyIndices_no_prefix,_[] (2.53s)
    --- ✅ PASS: TestIndexCleaner/RemoveDailyIndices_prefix,_[] (2.43s)
    --- ✅ PASS: TestIndexCleaner/RemoveRolloverIndices_no_prefix,_[ROLLOVER=true] (2.39s)
    --- ✅ PASS: TestIndexCleaner/RemoveRolloverIndices_prefix,_[ROLLOVER=true] (2.30s)
    --- ✅ PASS: TestIndexCleaner/RemoveArchiveIndices_no_prefix,_[ARCHIVE=true] (2.34s)
    --- ✅ PASS: TestIndexCleaner/RemoveArchiveIndices_prefix,_[ARCHIVE=true] (2.26s)
    --- ✅ PASS: TestIndexCleaner/RemoveDailyIndices_with_adaptiveSampling_no_prefix,_[] (2.60s)
    --- ✅ PASS: TestIndexCleaner/RemoveDailyIndices_with_adaptiveSampling_prefix,_[] (2.51s)
=== RUN   TestIndexRollover_FailIfILMNotPresent
Error: ILM policy jaeger-ilm-policy doesn't exist in Elasticsearch. Please create it and re-run init

--- ✅ PASS: TestIndexRollover_FailIfILMNotPresent (0.39s)
=== RUN   TestIndexRollover_CreateIndicesWithILM
=== RUN   TestIndexRollover_CreateIndicesWithILM/DefaultPolicyName
=== RUN   TestIndexRollover_CreateIndicesWithILM/DefaultPolicyName/NoPrefix

=== RUN   TestIndexRollover_CreateIndicesWithILM/DefaultPolicyName/WithPrefix

=== RUN   TestIndexRollover_CreateIndicesWithILM/DefaultPolicyName/WithAdaptiveSampling

=== RUN   TestIndexRollover_CreateIndicesWithILM/SetPolicyName
=== RUN   TestIndexRollover_CreateIndicesWithILM/SetPolicyName/NoPrefix

=== RUN   TestIndexRollover_CreateIndicesWithILM/SetPolicyName/WithPrefix

=== RUN   TestIndexRollover_CreateIndicesWithILM/SetPolicyName/WithAdaptiveSampling

--- ✅ PASS: TestIndexRollover_CreateIndicesWithILM (6.28s)
    --- ✅ PASS: TestIndexRollover_CreateIndicesWithILM/DefaultPolicyName (3.08s)
        --- ✅ PASS: TestIndexRollover_CreateIndicesWithILM/DefaultPolicyName/NoPrefix (0.95s)
        --- ✅ PASS: TestIndexRollover_CreateIndicesWithILM/DefaultPolicyName/WithPrefix (0.94s)
        --- ✅ PASS: TestIndexRollover_CreateIndicesWithILM/DefaultPolicyName/WithAdaptiveSampling (1.19s)
    --- ✅ PASS: TestIndexRollover_CreateIndicesWithILM/SetPolicyName (3.20s)
        --- ✅ PASS: TestIndexRollover_CreateIndicesWithILM/SetPolicyName/NoPrefix (1.01s)
        --- ✅ PASS: TestIndexRollover_CreateIndicesWithILM/SetPolicyName/WithPrefix (1.04s)
        --- ✅ PASS: TestIndexRollover_CreateIndicesWithILM/SetPolicyName/WithAdaptiveSampling (1.15s)
=== RUN   TestGRPCRemoteStorage
    integration.go:109: This test requires environment variable STORAGE=grpc
--- 🔕 SKIP: TestGRPCRemoteStorage (0.00s)
=== RUN   TestKafkaStorage
    integration.go:109: This test requires environment variable STORAGE=kafka
--- 🔕 SKIP: TestKafkaStorage (0.00s)
=== RUN   TestMemoryStorage
    integration.go:109: This test requires environment variable STORAGE=memory
--- 🔕 SKIP: TestMemoryStorage (0.00s)
=== RUN   TestDedupeSpans
--- ✅ PASS: TestDedupeSpans (0.00s)
✅ PASS
coverage: 8.7% of statements in ./...
ok  	github.com/jaegertracing/jaeger/plugin/storage/integration	122.457s	coverage: 8.7% of statements in ./...
T14:35:41 make index-cleaner-integration-test
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
docker buildx inspect jaeger-build > /dev/null || docker buildx create --use --name=jaeger-build --buildkitd-flags="--allow-insecure-entitlement security.insecure --allow-insecure-entitlement network.host" --driver-opt="network=host"
docker inspect registry > /dev/null || docker run --rm -d -p 5000:5000 --name registry registry:2
docker buildx build -t localhost:5000/baseimg_alpine:latest --push \
	--platform=linux/amd64,linux/s390x,linux/ppc64le,linux/arm64 \
	docker/base
#0 building with "jaeger-build" instance using docker-container driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 278B done
#1 DONE 0.0s

#2 [linux/ppc64le internal] load metadata for docker.io/library/alpine:3.20.1
#2 DONE 1.8s

#3 [linux/arm64 internal] load metadata for docker.io/library/alpine:3.20.1
#3 DONE 1.8s

#4 [linux/amd64 internal] load metadata for docker.io/library/alpine:3.20.1
#4 DONE 1.8s

#5 [internal] load .dockerignore
#5 transferring context: 2B done
#5 DONE 0.0s

#6 [linux/s390x internal] load metadata for docker.io/library/alpine:3.20.1
#6 DONE 1.8s

#7 [linux/arm64 cert 1/2] FROM docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0
#7 resolve docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0 0.0s done
#7 ...

#8 [linux/s390x cert 1/2] FROM docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0
#8 resolve docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0 0.0s done
#8 sha256:f9a77bce0ddc1b9251f410e8c69566b002f4e557ee68895b558671311b17fd91 3.46MB / 3.46MB 0.2s done
#8 extracting sha256:f9a77bce0ddc1b9251f410e8c69566b002f4e557ee68895b558671311b17fd91 0.1s done
#8 DONE 0.4s

#7 [linux/arm64 cert 1/2] FROM docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0
#7 sha256:a258b2a6b59a7aa244d8ceab095c7f8df726f27075a69fca7ad8490f3f63148a 4.09MB / 4.09MB 0.2s done
#7 extracting sha256:a258b2a6b59a7aa244d8ceab095c7f8df726f27075a69fca7ad8490f3f63148a
#7 extracting sha256:a258b2a6b59a7aa244d8ceab095c7f8df726f27075a69fca7ad8490f3f63148a 0.1s done
#7 DONE 0.4s

#9 [linux/amd64 cert 1/2] FROM docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0
#9 resolve docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0 0.0s done
#9 sha256:ec99f8b99825a742d50fb3ce173d291378a46ab54b8ef7dd75e5654e2a296e99 3.62MB / 3.62MB 0.2s done
#9 extracting sha256:ec99f8b99825a742d50fb3ce173d291378a46ab54b8ef7dd75e5654e2a296e99 0.1s done
#9 DONE 0.4s

#10 [linux/ppc64le cert 1/2] FROM docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0
#10 resolve docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0 0.0s done
#10 sha256:b02dcd5eb44e382ea711bca074a007403db63dacf55f888b3a87214d1052dd50 3.57MB / 3.57MB 0.2s done
#10 extracting sha256:b02dcd5eb44e382ea711bca074a007403db63dacf55f888b3a87214d1052dd50 0.2s done
#10 DONE 0.4s

#11 [linux/amd64 cert 2/2] RUN apk add --update --no-cache ca-certificates mailcap
#11 0.090 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/main/x86_64/APKINDEX.tar.gz
#11 0.305 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/community/x86_64/APKINDEX.tar.gz
#11 0.751 (1/2) Installing ca-certificates (20240226-r0)
#11 0.786 (2/2) Installing mailcap (2.1.54-r0)
#11 0.797 Executing busybox-1.36.1-r29.trigger
#11 0.804 Executing ca-certificates-20240226-r0.trigger
#11 0.864 OK: 9 MiB in 16 packages
#11 DONE 1.0s

#12 [linux/ppc64le cert 2/2] RUN apk add --update --no-cache ca-certificates mailcap
#12 0.200 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/main/ppc64le/APKINDEX.tar.gz
#12 ...

#13 [linux/amd64 stage-1 2/3] COPY --from=cert /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt
#13 DONE 0.0s

#14 [linux/amd64 stage-1 3/3] COPY --from=cert /etc/mime.types /etc/mime.types
#14 DONE 0.0s

#12 [linux/ppc64le cert 2/2] RUN apk add --update --no-cache ca-certificates mailcap
#12 1.144 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/community/ppc64le/APKINDEX.tar.gz
#12 2.725 (1/2) Installing ca-certificates (20240226-r0)
#12 2.818 (2/2) Installing mailcap (2.1.54-r0)
#12 2.835 Executing busybox-1.36.1-r29.trigger
#12 2.903 Executing ca-certificates-20240226-r0.trigger
#12 3.370 OK: 9 MiB in 16 packages
#12 ...

#15 [linux/s390x cert 2/2] RUN apk add --update --no-cache ca-certificates mailcap
#15 0.186 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/main/s390x/APKINDEX.tar.gz
#15 1.375 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/community/s390x/APKINDEX.tar.gz
#15 2.794 (1/2) Installing ca-certificates (20240226-r0)
#15 2.927 (2/2) Installing mailcap (2.1.54-r0)
#15 2.951 Executing busybox-1.36.1-r29.trigger
#15 3.010 Executing ca-certificates-20240226-r0.trigger
#15 3.406 OK: 9 MiB in 16 packages
#15 DONE 3.6s

#16 [linux/s390x stage-1 2/3] COPY --from=cert /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt
#16 DONE 0.0s

#12 [linux/ppc64le cert 2/2] RUN apk add --update --no-cache ca-certificates mailcap
#12 DONE 3.6s

#17 [linux/s390x stage-1 3/3] COPY --from=cert /etc/mime.types /etc/mime.types
#17 DONE 0.0s

#18 [linux/ppc64le stage-1 2/3] COPY --from=cert /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt
#18 DONE 0.0s

#19 [linux/ppc64le stage-1 3/3] COPY --from=cert /etc/mime.types /etc/mime.types
#19 DONE 0.0s

#20 [linux/arm64 cert 2/2] RUN apk add --update --no-cache ca-certificates mailcap
#20 0.215 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/main/aarch64/APKINDEX.tar.gz
#20 1.253 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/community/aarch64/APKINDEX.tar.gz
#20 3.175 (1/2) Installing ca-certificates (20240226-r0)
#20 3.260 (2/2) Installing mailcap (2.1.54-r0)
#20 3.276 Executing busybox-1.36.1-r29.trigger
#20 3.354 Executing ca-certificates-20240226-r0.trigger
#20 3.671 OK: 10 MiB in 16 packages
#20 DONE 3.8s

#21 [linux/arm64 stage-1 2/3] COPY --from=cert /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt
#21 DONE 0.0s

#22 [linux/arm64 stage-1 3/3] COPY --from=cert /etc/mime.types /etc/mime.types
#22 DONE 0.0s

#23 exporting to image
#23 exporting layers 0.1s done
#23 exporting manifest sha256:3052273c3d1598739fc093821af018a23abd6b65388085a46a1ca3b924beaabc done
#23 exporting config sha256:fd988346b41591ae78f1cfe40151199518ce0be80b7aa0a8abb17e302fd5049f done
#23 exporting attestation manifest sha256:0f3c789ae6b3bcdae3f6870a654cbf33ae22717e17a1282bc16d6f0b4026ddac done
#23 exporting manifest sha256:e43e7568f62b383cab197972ea280338b84db7c790eaf3f4e376e6d39092720f done
#23 exporting config sha256:ef5cf6208f229c2e32c84b94e60fe2c9670b23e7bb9fb9f34dea680f8bc44d70 done
#23 exporting attestation manifest sha256:177ba7ee435bd583793f85c781d6962ef0453bc7816304ec41d7ce57860ac86b done
#23 exporting manifest sha256:ec395db8bcac15f8146de930183a98b3a5d198e2e9ebdba013963ca5c3028bf2 done
#23 exporting config sha256:12870507fc7d8139f18bb0351df28741dbf1b4a3f1b23925bea7276f44c0a691 done
#23 exporting attestation manifest sha256:50052d2518cb8be5508f36259aad4c338464e09f1a6e3fd65956fb1b7ee7a0d8 done
#23 exporting manifest sha256:ce55216030def02bdb3d666e3965f5412d4d6dcf6272e08577cede3c19ad1694 done
#23 exporting config sha256:a49e447a46342723b9b2781ec9a923444b9db6e1956f297a015b0d59ef85acd3 done
#23 exporting attestation manifest sha256:5086f4c9c2228c19e296c4060dc56425f8f959f6574e1aa08967e40ce04f89ee done
#23 exporting manifest list sha256:ec9f2822ba2f74235c85ab18867ecf3a89813b925a08147805b9a293b264397e done
#23 pushing layers 0.1s done
#23 pushing manifest for localhost:5000/baseimg_alpine:latest@sha256:ec9f2822ba2f74235c85ab18867ecf3a89813b925a08147805b9a293b264397e
#23 pushing manifest for localhost:5000/baseimg_alpine:latest@sha256:ec9f2822ba2f74235c85ab18867ecf3a89813b925a08147805b9a293b264397e 0.0s done
#23 DONE 0.3s
GOOS=linux GOARCH=amd64 make build-esmapping-generator
make[1]: Entering directory '/home/runner/work/jaeger/jaeger'
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -o ./plugin/storage/es/esmapping-generator-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/esmapping-generator/
make[1]: Leaving directory '/home/runner/work/jaeger/jaeger'
GOOS=linux GOARCH=amd64 make build-es-index-cleaner
make[1]: Entering directory '/home/runner/work/jaeger/jaeger'
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -o ./cmd/es-index-cleaner/es-index-cleaner-linux-amd64 ./cmd/es-index-cleaner/
make[1]: Leaving directory '/home/runner/work/jaeger/jaeger'
GOOS=linux GOARCH=amd64 make build-es-rollover
make[1]: Entering directory '/home/runner/work/jaeger/jaeger'
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -o ./cmd/es-rollover/es-rollover-linux-amd64 ./cmd/es-rollover/
make[1]: Leaving directory '/home/runner/work/jaeger/jaeger'
docker build -t jaegertracing/jaeger-es-index-cleaner:latest --build-arg base_image=localhost:5000/baseimg_alpine:latest --build-arg TARGETARCH=amd64 cmd/es-index-cleaner
#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 251B done
#1 DONE 0.0s

#2 [internal] load metadata for localhost:5000/baseimg_alpine:latest
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/2] FROM localhost:5000/baseimg_alpine:latest@sha256:ec9f2822ba2f74235c85ab18867ecf3a89813b925a08147805b9a293b264397e
#4 resolve localhost:5000/baseimg_alpine:latest@sha256:ec9f2822ba2f74235c85ab18867ecf3a89813b925a08147805b9a293b264397e done
#4 extracting sha256:01485b1d2af5775fd3456d1575c860d8374d77790e4b47ceaf4cf517129219ca done
#4 extracting sha256:1e0dd9be89db3281108c7dc0b7e963513d6e7cddc48d0f523a6df4efe746b82b done
#4 sha256:1e0dd9be89db3281108c7dc0b7e963513d6e7cddc48d0f523a6df4efe746b82b 20.20kB / 20.20kB 0.0s done
#4 sha256:ec9f2822ba2f74235c85ab18867ecf3a89813b925a08147805b9a293b264397e 3.11kB / 3.11kB done
#4 sha256:3052273c3d1598739fc093821af018a23abd6b65388085a46a1ca3b924beaabc 862B / 862B done
#4 sha256:fd988346b41591ae78f1cfe40151199518ce0be80b7aa0a8abb17e302fd5049f 1.06kB / 1.06kB done
#4 sha256:01485b1d2af5775fd3456d1575c860d8374d77790e4b47ceaf4cf517129219ca 127.52kB / 127.52kB 0.0s done
#4 DONE 0.1s

#5 [internal] load build context
#5 transferring context: 13.19MB 0.1s done
#5 DONE 0.1s

#6 [2/2] COPY es-index-cleaner-linux-amd64 /go/bin/es-index-cleaner-linux
#6 DONE 0.0s

#7 exporting to image
#7 exporting layers
#7 exporting layers 0.2s done
#7 writing image sha256:ebc932a3a144cb829bb41ae90e75f488d54b2b9b6ce30d7263e5328c7f14d81b done
#7 naming to docker.io/jaegertracing/jaeger-es-index-cleaner:latest done
#7 DONE 0.2s
docker build -t jaegertracing/jaeger-es-rollover:latest --build-arg base_image=localhost:5000/baseimg_alpine:latest --build-arg TARGETARCH=amd64 cmd/es-rollover
#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 224B done
#1 DONE 0.0s

#2 [internal] load metadata for localhost:5000/baseimg_alpine:latest
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/2] FROM localhost:5000/baseimg_alpine:latest@sha256:ec9f2822ba2f74235c85ab18867ecf3a89813b925a08147805b9a293b264397e
#4 CACHED

#5 [internal] load build context
#5 transferring context: 13.68MB 0.1s done
#5 DONE 0.1s

#6 [2/2] COPY es-rollover-linux-amd64 /go/bin/es-rollover
#6 DONE 0.1s

#7 exporting to image
#7 exporting layers
#7 exporting layers 0.7s done
#7 writing image sha256:13e57a781ad800785693deb7465b38b56e292b7d9afd98eb1f4985a95748295f done
#7 naming to docker.io/jaegertracing/jaeger-es-rollover:latest done
#7 DONE 0.7s
Finished building jaeger-es-indices-clean ==============
make storage-integration-test COVEROUT=cover-index-cleaner.out
make[1]: Entering directory '/home/runner/work/jaeger/jaeger'
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
# Expire tests results for storage integration tests since the environment might change
# even though the code remains the same.
go clean -testcache
bash -c "set -e; set -o pipefail; go test -race -v -coverpkg=./... -coverprofile cover-index-cleaner.out ./plugin/storage/integration/... | sed 's/PASS/✅ PASS/g' | sed 's/FAIL/❌ FAIL/g' | sed 's/SKIP/🔕 SKIP/g'"
=== RUN   TestBadgerStorage
    integration.go:109: This test requires environment variable STORAGE=badger
--- 🔕 SKIP: TestBadgerStorage (0.00s)
=== RUN   TestCassandraStorage
    integration.go:109: This test requires environment variable STORAGE=cassandra
--- 🔕 SKIP: TestCassandraStorage (0.00s)
=== RUN   TestElasticsearchStorage
    integration.go:109: This test requires environment variable STORAGE=elasticsearch|opensearch
--- 🔕 SKIP: TestElasticsearchStorage (0.00s)
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields
    integration.go:109: This test requires environment variable STORAGE=elasticsearch|opensearch
--- 🔕 SKIP: TestElasticsearchStorage_AllTagsAsObjectFields (0.00s)
=== RUN   TestElasticsearchStorage_IndexTemplates
    integration.go:109: This test requires environment variable STORAGE=elasticsearch|opensearch
--- 🔕 SKIP: TestElasticsearchStorage_IndexTemplates (0.00s)
=== RUN   TestIndexCleaner_doNotFailOnEmptyStorage
    integration.go:109: This test requires environment variable STORAGE=elasticsearch|opensearch
--- 🔕 SKIP: TestIndexCleaner_doNotFailOnEmptyStorage (0.00s)
=== RUN   TestIndexCleaner_doNotFailOnFullStorage
    integration.go:109: This test requires environment variable STORAGE=elasticsearch|opensearch
--- 🔕 SKIP: TestIndexCleaner_doNotFailOnFullStorage (0.00s)
=== RUN   TestIndexCleaner
    integration.go:109: This test requires environment variable STORAGE=elasticsearch|opensearch
--- 🔕 SKIP: TestIndexCleaner (0.00s)
=== RUN   TestIndexRollover_FailIfILMNotPresent
    integration.go:109: This test requires environment variable STORAGE=elasticsearch|opensearch
--- 🔕 SKIP: TestIndexRollover_FailIfILMNotPresent (0.00s)
=== RUN   TestIndexRollover_CreateIndicesWithILM
    integration.go:109: This test requires environment variable STORAGE=elasticsearch|opensearch
--- 🔕 SKIP: TestIndexRollover_CreateIndicesWithILM (0.00s)
=== RUN   TestGRPCRemoteStorage
    integration.go:109: This test requires environment variable STORAGE=grpc
--- 🔕 SKIP: TestGRPCRemoteStorage (0.00s)
=== RUN   TestKafkaStorage
    integration.go:109: This test requires environment variable STORAGE=kafka
--- 🔕 SKIP: TestKafkaStorage (0.00s)
=== RUN   TestMemoryStorage
    integration.go:109: This test requires environment variable STORAGE=memory
--- 🔕 SKIP: TestMemoryStorage (0.00s)
=== RUN   TestDedupeSpans
--- ✅ PASS: TestDedupeSpans (0.00s)
✅ PASS
coverage: 0.5% of statements in ./...
ok  	github.com/jaegertracing/jaeger/plugin/storage/integration	1.172s	coverage: 0.5% of statements in ./...
T14:35:54 make index-rollover-integration-test
make[1]: Leaving directory '/home/runner/work/jaeger/jaeger'
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
docker buildx inspect jaeger-build > /dev/null || docker buildx create --use --name=jaeger-build --buildkitd-flags="--allow-insecure-entitlement security.insecure --allow-insecure-entitlement network.host" --driver-opt="network=host"
docker inspect registry > /dev/null || docker run --rm -d -p 5000:5000 --name registry registry:2
docker buildx build -t localhost:5000/baseimg_alpine:latest --push \
	--platform=linux/amd64,linux/s390x,linux/ppc64le,linux/arm64 \
	docker/base
#0 building with "jaeger-build" instance using docker-container driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 278B done
#1 DONE 0.0s

#2 [linux/ppc64le internal] load metadata for docker.io/library/alpine:3.20.1
#2 ...

#3 [linux/arm64 internal] load metadata for docker.io/library/alpine:3.20.1
#3 DONE 0.2s

#4 [linux/s390x internal] load metadata for docker.io/library/alpine:3.20.1
#4 DONE 0.2s

#5 [internal] load .dockerignore
#5 transferring context: 2B done
#5 DONE 0.0s

#6 [linux/amd64 internal] load metadata for docker.io/library/alpine:3.20.1
#6 DONE 0.2s

#2 [linux/ppc64le internal] load metadata for docker.io/library/alpine:3.20.1
#2 DONE 0.2s

#7 [linux/amd64 cert 1/2] FROM docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0
#7 resolve docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0 0.0s done
#7 DONE 0.0s

#8 [linux/amd64 stage-1 2/3] COPY --from=cert /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt
#8 CACHED

#9 [linux/amd64 cert 2/2] RUN apk add --update --no-cache ca-certificates mailcap
#9 CACHED

#10 [linux/amd64 stage-1 3/3] COPY --from=cert /etc/mime.types /etc/mime.types
#10 CACHED

#11 [linux/s390x cert 1/2] FROM docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0
#11 resolve docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0 0.0s done
#11 DONE 0.0s

#12 [linux/s390x stage-1 2/3] COPY --from=cert /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt
#12 CACHED

#13 [linux/s390x cert 2/2] RUN apk add --update --no-cache ca-certificates mailcap
#13 CACHED

#14 [linux/arm64 cert 1/2] FROM docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0
#14 resolve docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0 0.0s done
#14 DONE 0.0s

#15 [linux/s390x stage-1 3/3] COPY --from=cert /etc/mime.types /etc/mime.types
#15 CACHED

#16 [linux/arm64 stage-1 2/3] COPY --from=cert /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt
#16 CACHED

#17 [linux/arm64 cert 2/2] RUN apk add --update --no-cache ca-certificates mailcap
#17 CACHED

#18 [linux/arm64 stage-1 3/3] COPY --from=cert /etc/mime.types /etc/mime.types
#18 CACHED

#19 [linux/ppc64le cert 1/2] FROM docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0
#19 resolve docker.io/library/alpine:3.20.1@sha256:b89d9c93e9ed3597455c90a0b88a8bbb5cb7188438f70953fede212a0c4394e0 0.0s done
#19 DONE 0.0s

#20 [linux/ppc64le stage-1 2/3] COPY --from=cert /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt
#20 CACHED

#21 [linux/ppc64le cert 2/2] RUN apk add --update --no-cache ca-certificates mailcap
#21 CACHED

#22 [linux/ppc64le stage-1 3/3] COPY --from=cert /etc/mime.types /etc/mime.types
#22 CACHED

#23 exporting to image
#23 exporting layers done
#23 exporting manifest sha256:3052273c3d1598739fc093821af018a23abd6b65388085a46a1ca3b924beaabc done
#23 exporting config sha256:fd988346b41591ae78f1cfe40151199518ce0be80b7aa0a8abb17e302fd5049f done
#23 exporting attestation manifest sha256:b611b34455d440f8fd36d299082432baefda630c150e607051cd989979e0c1dc done
#23 exporting manifest sha256:e43e7568f62b383cab197972ea280338b84db7c790eaf3f4e376e6d39092720f done
#23 exporting config sha256:ef5cf6208f229c2e32c84b94e60fe2c9670b23e7bb9fb9f34dea680f8bc44d70 done
#23 exporting attestation manifest sha256:5deacd0c6256aff07cd9f93777f91afe47b7795411d9b7c767a93ab95223492a done
#23 exporting manifest sha256:ec395db8bcac15f8146de930183a98b3a5d198e2e9ebdba013963ca5c3028bf2 done
#23 exporting config sha256:12870507fc7d8139f18bb0351df28741dbf1b4a3f1b23925bea7276f44c0a691 done
#23 exporting attestation manifest sha256:96a653a39ef07462c521d78a2768946442d19a1cf927cf9bf5c681b8a6d338fb done
#23 exporting manifest sha256:ce55216030def02bdb3d666e3965f5412d4d6dcf6272e08577cede3c19ad1694 done
#23 exporting config sha256:a49e447a46342723b9b2781ec9a923444b9db6e1956f297a015b0d59ef85acd3 done
#23 exporting attestation manifest sha256:331dacea418c3707c8bc30bae0a894e46293d55450cf8d4e205d05656560f1ae done
#23 exporting manifest list sha256:e0f48641b85a1135e11487ef4cf419d291c38e7898e866778b217d8c8dbf6f71 done
#23 pushing layers 0.0s done
#23 pushing manifest for localhost:5000/baseimg_alpine:latest@sha256:e0f48641b85a1135e11487ef4cf419d291c38e7898e866778b217d8c8dbf6f71
#23 pushing manifest for localhost:5000/baseimg_alpine:latest@sha256:e0f48641b85a1135e11487ef4cf419d291c38e7898e866778b217d8c8dbf6f71 0.0s done
#23 DONE 0.1s
GOOS=linux GOARCH=amd64 make build-esmapping-generator
make[1]: Entering directory '/home/runner/work/jaeger/jaeger'
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -o ./plugin/storage/es/esmapping-generator-linux-amd64 -ldflags "-X github.com/jaegertracing/jaeger/pkg/version.commitSHA=04306cdafff3ef4914010dbc7c503bfc2541b7dd -X github.com/jaegertracing/jaeger/pkg/version.latestVersion= -X github.com/jaegertracing/jaeger/pkg/version.date=2024-07-07T14:27:09Z" ./cmd/esmapping-generator/
make[1]: Leaving directory '/home/runner/work/jaeger/jaeger'
GOOS=linux GOARCH=amd64 make build-es-index-cleaner
make[1]: Entering directory '/home/runner/work/jaeger/jaeger'
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -o ./cmd/es-index-cleaner/es-index-cleaner-linux-amd64 ./cmd/es-index-cleaner/
make[1]: Leaving directory '/home/runner/work/jaeger/jaeger'
GOOS=linux GOARCH=amd64 make build-es-rollover
make[1]: Entering directory '/home/runner/work/jaeger/jaeger'
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
CGO_ENABLED=0 installsuffix=cgo go build -trimpath -o ./cmd/es-rollover/es-rollover-linux-amd64 ./cmd/es-rollover/
make[1]: Leaving directory '/home/runner/work/jaeger/jaeger'
docker build -t jaegertracing/jaeger-es-index-cleaner:latest --build-arg base_image=localhost:5000/baseimg_alpine:latest --build-arg TARGETARCH=amd64 cmd/es-index-cleaner
#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 251B done
#1 DONE 0.0s

#2 [internal] load metadata for localhost:5000/baseimg_alpine:latest
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/2] FROM localhost:5000/baseimg_alpine:latest@sha256:e0f48641b85a1135e11487ef4cf419d291c38e7898e866778b217d8c8dbf6f71
#4 resolve localhost:5000/baseimg_alpine:latest@sha256:e0f48641b85a1135e11487ef4cf419d291c38e7898e866778b217d8c8dbf6f71 done
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 13.19MB 0.1s done
#5 DONE 0.1s

#6 [2/2] COPY es-index-cleaner-linux-amd64 /go/bin/es-index-cleaner-linux
#6 CACHED

#7 exporting to image
#7 exporting layers done
#7 writing image sha256:ebc932a3a144cb829bb41ae90e75f488d54b2b9b6ce30d7263e5328c7f14d81b done
#7 naming to docker.io/jaegertracing/jaeger-es-index-cleaner:latest done
#7 DONE 0.0s
docker build -t jaegertracing/jaeger-es-rollover:latest --build-arg base_image=localhost:5000/baseimg_alpine:latest --build-arg TARGETARCH=amd64 cmd/es-rollover
#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 224B done
#1 DONE 0.0s

#2 [internal] load metadata for localhost:5000/baseimg_alpine:latest
#2 DONE 0.0s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/2] FROM localhost:5000/baseimg_alpine:latest@sha256:e0f48641b85a1135e11487ef4cf419d291c38e7898e866778b217d8c8dbf6f71
#4 resolve localhost:5000/baseimg_alpine:latest@sha256:e0f48641b85a1135e11487ef4cf419d291c38e7898e866778b217d8c8dbf6f71 done
#4 CACHED

#5 [internal] load build context
#5 transferring context: 13.68MB 0.1s done
#5 DONE 0.1s

#6 [2/2] COPY es-rollover-linux-amd64 /go/bin/es-rollover
#6 DONE 0.1s

#7 exporting to image
#7 exporting layers
#7 exporting layers 0.5s done
#7 writing image sha256:c7294e2b74148e0845e1a652a42f1f8cc26d2092d954bd5c28513928554d1996 done
#7 naming to docker.io/jaegertracing/jaeger-es-rollover:latest done
#7 DONE 0.5s
Finished building jaeger-es-indices-clean ==============
make storage-integration-test COVEROUT=cover-index-rollover.out
make[1]: Entering directory '/home/runner/work/jaeger/jaeger'
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
fatal: No names found, cannot describe anything.
# Expire tests results for storage integration tests since the environment might change
# even though the code remains the same.
go clean -testcache
bash -c "set -e; set -o pipefail; go test -race -v -coverpkg=./... -coverprofile cover-index-rollover.out ./plugin/storage/integration/... | sed 's/PASS/✅ PASS/g' | sed 's/FAIL/❌ FAIL/g' | sed 's/SKIP/🔕 SKIP/g'"
=== RUN   TestBadgerStorage
    integration.go:109: This test requires environment variable STORAGE=badger
--- 🔕 SKIP: TestBadgerStorage (0.00s)
=== RUN   TestCassandraStorage
    integration.go:109: This test requires environment variable STORAGE=cassandra
--- 🔕 SKIP: TestCassandraStorage (0.00s)
=== RUN   TestElasticsearchStorage
    integration.go:109: This test requires environment variable STORAGE=elasticsearch|opensearch
--- 🔕 SKIP: TestElasticsearchStorage (0.00s)
=== RUN   TestElasticsearchStorage_AllTagsAsObjectFields
    integration.go:109: This test requires environment variable STORAGE=elasticsearch|opensearch
--- 🔕 SKIP: TestElasticsearchStorage_AllTagsAsObjectFields (0.00s)
=== RUN   TestElasticsearchStorage_IndexTemplates
    integration.go:109: This test requires environment variable STORAGE=elasticsearch|opensearch
--- 🔕 SKIP: TestElasticsearchStorage_IndexTemplates (0.00s)
=== RUN   TestIndexCleaner_doNotFailOnEmptyStorage
    integration.go:109: This test requires environment variable STORAGE=elasticsearch|opensearch
--- 🔕 SKIP: TestIndexCleaner_doNotFailOnEmptyStorage (0.00s)
=== RUN   TestIndexCleaner_doNotFailOnFullStorage
    integration.go:109: This test requires environment variable STORAGE=elasticsearch|opensearch
--- 🔕 SKIP: TestIndexCleaner_doNotFailOnFullStorage (0.00s)
=== RUN   TestIndexCleaner
    integration.go:109: This test requires environment variable STORAGE=elasticsearch|opensearch
--- 🔕 SKIP: TestIndexCleaner (0.00s)
=== RUN   TestIndexRollover_FailIfILMNotPresent
    integration.go:109: This test requires environment variable STORAGE=elasticsearch|opensearch
--- 🔕 SKIP: TestIndexRollover_FailIfILMNotPresent (0.00s)
=== RUN   TestIndexRollover_CreateIndicesWithILM
    integration.go:109: This test requires environment variable STORAGE=elasticsearch|opensearch
--- 🔕 SKIP: TestIndexRollover_CreateIndicesWithILM (0.00s)
=== RUN   TestGRPCRemoteStorage
    integration.go:109: This test requires environment variable STORAGE=grpc
--- 🔕 SKIP: TestGRPCRemoteStorage (0.00s)
=== RUN   TestKafkaStorage
    integration.go:109: This test requires environment variable STORAGE=kafka
--- 🔕 SKIP: TestKafkaStorage (0.00s)
=== RUN   TestMemoryStorage
    integration.go:109: This test requires environment variable STORAGE=memory
--- 🔕 SKIP: TestMemoryStorage (0.00s)
=== RUN   TestDedupeSpans
--- ✅ PASS: TestDedupeSpans (0.00s)
✅ PASS
coverage: 0.5% of statements in ./...
ok  	github.com/jaegertracing/jaeger/plugin/storage/integration	1.164s	coverage: 0.5% of statements in ./...
make[1]: Leaving directory '/home/runner/work/jaeger/jaeger'
T14:36:00 teardown_storage docker-compose/elasticsearch/v7/docker-compose.yml
T14:36:00 local compose_file=docker-compose/elasticsearch/v7/docker-compose.yml
T14:36:00 docker compose -f docker-compose/elasticsearch/v7/docker-compose.yml down
time="2024-07-07T14:36:00Z" level=warning msg="/home/runner/work/jaeger/jaeger/docker-compose/elasticsearch/v7/docker-compose.yml: `version` is obsolete"
 Container v7-elasticsearch-1  Stopping
 Container v7-elasticsearch-1  Stopped
 Container v7-elasticsearch-1  Removing
 Container v7-elasticsearch-1  Removed
 Network v7_default  Removing
 Network v7_default  Removed